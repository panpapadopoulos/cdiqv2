{
  "version": 3,
  "sources": ["../bundle-NXjgIc/checked-fetch.js", "../bundle-NXjgIc/strip-cf-connecting-ip-header.js", "../../../src/auth.ts", "../../../src/api.ts", "../../../src/pages/dashboard.ts", "../../../src/pages/login.ts", "../../../src/pages/secretary.ts", "../../../src/pages/company.ts", "../../../src/pages/gatekeeper.ts", "../../../src/index.ts", "../../../node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "../../../node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../bundle-NXjgIc/middleware-insertion-facade.js", "../../../node_modules/wrangler/templates/middleware/common.ts", "../bundle-NXjgIc/middleware-loader.entry.ts"],
  "sourceRoot": "A:\\CareerFair\\uop-cdiq-main\\cloudflare-app\\.wrangler\\tmp\\dev-R2Nv12",
  "sourcesContent": ["const urls = new Set();\n\nfunction checkURL(request, init) {\n\tconst url =\n\t\trequest instanceof URL\n\t\t\t? request\n\t\t\t: new URL(\n\t\t\t\t\t(typeof request === \"string\"\n\t\t\t\t\t\t? new Request(request, init)\n\t\t\t\t\t\t: request\n\t\t\t\t\t).url\n\t\t\t\t);\n\tif (url.port && url.port !== \"443\" && url.protocol === \"https:\") {\n\t\tif (!urls.has(url.toString())) {\n\t\t\turls.add(url.toString());\n\t\t\tconsole.warn(\n\t\t\t\t`WARNING: known issue with \\`fetch()\\` requests to custom HTTPS ports in published Workers:\\n` +\n\t\t\t\t\t` - ${url.toString()} - the custom port will be ignored when the Worker is published using the \\`wrangler deploy\\` command.\\n`\n\t\t\t);\n\t\t}\n\t}\n}\n\nglobalThis.fetch = new Proxy(globalThis.fetch, {\n\tapply(target, thisArg, argArray) {\n\t\tconst [request, init] = argArray;\n\t\tcheckURL(request, init);\n\t\treturn Reflect.apply(target, thisArg, argArray);\n\t},\n});\n", "function stripCfConnectingIPHeader(input, init) {\n\tconst request = new Request(input, init);\n\trequest.headers.delete(\"CF-Connecting-IP\");\n\treturn request;\n}\n\nglobalThis.fetch = new Proxy(globalThis.fetch, {\n\tapply(target, thisArg, argArray) {\n\t\treturn Reflect.apply(target, thisArg, [\n\t\t\tstripCfConnectingIPHeader.apply(null, argArray),\n\t\t]);\n\t},\n});\n", "// Authentication utilities for session management\r\nimport type { Env, Operator, Session } from './types';\r\n\r\n// Generate a random session ID\r\nexport function generateSessionId(): string {\r\n    const array = new Uint8Array(32);\r\n    crypto.getRandomValues(array);\r\n    return Array.from(array, b => b.toString(16).padStart(2, '0')).join('');\r\n}\r\n\r\n// Hash password using SHA-256\r\nexport async function hashPassword(password: string): Promise<string> {\r\n    const encoder = new TextEncoder();\r\n    const data = encoder.encode(password);\r\n    const hashBuffer = await crypto.subtle.digest('SHA-256', data);\r\n    const hashArray = Array.from(new Uint8Array(hashBuffer));\r\n    return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');\r\n}\r\n\r\n// Verify password against stored hash\r\nexport async function verifyPassword(password: string, hash: string): Promise<boolean> {\r\n    const passwordHash = await hashPassword(password);\r\n    return passwordHash === hash;\r\n}\r\n\r\n// Create a new session\r\nexport async function createSession(db: D1Database, operatorId: number): Promise<string> {\r\n    const sessionId = generateSessionId();\r\n    const expiresAt = new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString(); // 24 hours\r\n\r\n    await db.prepare(\r\n        'INSERT INTO sessions (id, operator_id, expires_at) VALUES (?, ?, ?)'\r\n    ).bind(sessionId, operatorId, expiresAt).run();\r\n\r\n    return sessionId;\r\n}\r\n\r\n// Validate session and return operator\r\nexport async function validateSession(\r\n    db: D1Database,\r\n    sessionId: string | null\r\n): Promise<{ operator: Operator; session: Session } | null> {\r\n    if (!sessionId) return null;\r\n\r\n    const now = new Date().toISOString();\r\n\r\n    const result = await db.prepare(`\r\n    SELECT \r\n      s.id as session_id, s.operator_id, s.expires_at, s.created_at as session_created,\r\n      o.id, o.username, o.password_hash, o.role, o.interviewer_id, o.created_at\r\n    FROM sessions s\r\n    JOIN operators o ON s.operator_id = o.id\r\n    WHERE s.id = ? AND s.expires_at > ?\r\n  `).bind(sessionId, now).first<{\r\n        session_id: string;\r\n        operator_id: number;\r\n        expires_at: string;\r\n        session_created: string;\r\n        id: number;\r\n        username: string;\r\n        password_hash: string;\r\n        role: 'SECRETARY' | 'COMPANY';\r\n        interviewer_id: number | null;\r\n        created_at: string;\r\n    }>();\r\n\r\n    if (!result) return null;\r\n\r\n    return {\r\n        session: {\r\n            id: result.session_id,\r\n            operator_id: result.operator_id,\r\n            expires_at: result.expires_at,\r\n            created_at: result.session_created\r\n        },\r\n        operator: {\r\n            id: result.id,\r\n            username: result.username,\r\n            password_hash: result.password_hash,\r\n            role: result.role,\r\n            interviewer_id: result.interviewer_id,\r\n            created_at: result.created_at\r\n        }\r\n    };\r\n}\r\n\r\n// Delete session (logout)\r\nexport async function deleteSession(db: D1Database, sessionId: string): Promise<void> {\r\n    await db.prepare('DELETE FROM sessions WHERE id = ?').bind(sessionId).run();\r\n}\r\n\r\n// Clean up expired sessions\r\nexport async function cleanupExpiredSessions(db: D1Database): Promise<void> {\r\n    const now = new Date().toISOString();\r\n    await db.prepare('DELETE FROM sessions WHERE expires_at < ?').bind(now).run();\r\n}\r\n\r\n// Get session ID from cookies\r\nexport function getSessionFromCookies(request: Request): string | null {\r\n    const cookieHeader = request.headers.get('Cookie');\r\n    if (!cookieHeader) return null;\r\n\r\n    const cookies = cookieHeader.split(';').map(c => c.trim());\r\n    for (const cookie of cookies) {\r\n        const [name, value] = cookie.split('=');\r\n        if (name === 'session') {\r\n            return value;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n\r\n// Create Set-Cookie header for session\r\nexport function createSessionCookie(sessionId: string): string {\r\n    return `session=${sessionId}; Path=/; HttpOnly; SameSite=Strict; Max-Age=86400`;\r\n}\r\n\r\n// Create expired cookie for logout\r\nexport function createLogoutCookie(): string {\r\n    return `session=; Path=/; HttpOnly; SameSite=Strict; Max-Age=0`;\r\n}\r\n", "// API route handlers\r\nimport type { Env, Operator, ApiResponse, DashboardData, InterviewerStatus, RegisterStudentRequest, EnqueueRequest, Interviewee, Interview, Interviewer, CreateInterviewerRequest, UpdateInterviewerRequest } from './types';\r\n\r\nimport { verifyPassword, createSession, deleteSession, validateSession, getSessionFromCookies, createSessionCookie, createLogoutCookie } from './auth';\r\n\r\n// Helper to create JSON responses\r\nfunction json<T>(data: ApiResponse<T>, status = 200, headers: Record<string, string> = {}): Response {\r\n    return new Response(JSON.stringify(data), {\r\n        status,\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            ...headers\r\n        }\r\n    });\r\n}\r\n\r\n// DEV MODE: Set to true to skip all authentication\r\nconst DEV_MODE = true;\r\n\r\n// Fake operator for dev mode - set as COMPANY with interviewer_id for testing\r\nconst DEV_OPERATOR: Operator = {\r\n    id: 1,\r\n    username: 'dev',\r\n    password_hash: '',\r\n    role: 'COMPANY',\r\n    interviewer_id: 1,\r\n    created_at: ''\r\n};\r\n\r\n\r\n// Authentication required middleware\r\nasync function requireAuth(request: Request, env: Env): Promise<{ operator: Operator } | Response> {\r\n    // DEV MODE: Skip auth\r\n    if (DEV_MODE) {\r\n        return { operator: DEV_OPERATOR };\r\n    }\r\n\r\n    const sessionId = getSessionFromCookies(request);\r\n    const auth = await validateSession(env.DB, sessionId);\r\n\r\n    if (!auth) {\r\n        return json({ success: false, error: 'Unauthorized' }, 401);\r\n    }\r\n\r\n    return { operator: auth.operator };\r\n}\r\n\r\n\r\n// Require SECRETARY role\r\nasync function requireSecretary(request: Request, env: Env): Promise<{ operator: Operator } | Response> {\r\n    const auth = await requireAuth(request, env);\r\n    if (auth instanceof Response) return auth;\r\n\r\n    // DEV MODE: Skip role check\r\n    if (DEV_MODE) return auth;\r\n\r\n    if (auth.operator.role !== 'SECRETARY') {\r\n        return json({ success: false, error: 'Forbidden: Secretary access required' }, 403);\r\n    }\r\n\r\n    return auth;\r\n}\r\n\r\n// Require GATEKEEPER role\r\nasync function requireGatekeeper(request: Request, env: Env): Promise<{ operator: Operator } | Response> {\r\n    const auth = await requireAuth(request, env);\r\n    if (auth instanceof Response) return auth;\r\n\r\n    // DEV MODE: Skip role check\r\n    if (DEV_MODE) return auth;\r\n\r\n    if (auth.operator.role !== 'GATEKEEPER') {\r\n        return json({ success: false, error: 'Forbidden: Gatekeeper access required' }, 403);\r\n    }\r\n\r\n    return auth;\r\n}\r\n\r\n// Require SECRETARY or GATEKEEPER role\r\nasync function requireSecretaryOrGatekeeper(request: Request, env: Env): Promise<{ operator: Operator } | Response> {\r\n    const auth = await requireAuth(request, env);\r\n    if (auth instanceof Response) return auth;\r\n\r\n    // DEV MODE: Skip role check\r\n    if (DEV_MODE) return auth;\r\n\r\n    if (auth.operator.role !== 'SECRETARY' && auth.operator.role !== 'GATEKEEPER') {\r\n        return json({ success: false, error: 'Forbidden: Secretary or Gatekeeper access required' }, 403);\r\n    }\r\n\r\n    return auth;\r\n}\r\n\r\n\r\n\r\n// ============ AUTH ROUTES ============\r\n\r\nexport async function handleLogin(request: Request, env: Env): Promise<Response> {\r\n    try {\r\n        const body = await request.json() as { username?: string; password?: string };\r\n        const { username, password } = body;\r\n\r\n        if (!username || !password) {\r\n            return json({ success: false, error: 'Username and password required' }, 400);\r\n        }\r\n\r\n        const operator = await env.DB.prepare(\r\n            'SELECT * FROM operators WHERE username = ?'\r\n        ).bind(username).first<Operator>();\r\n\r\n        if (!operator) {\r\n            return json({ success: false, error: 'Invalid credentials' }, 401);\r\n        }\r\n\r\n        const valid = await verifyPassword(password, operator.password_hash);\r\n        if (!valid) {\r\n            return json({ success: false, error: 'Invalid credentials' }, 401);\r\n        }\r\n\r\n        const sessionId = await createSession(env.DB, operator.id);\r\n\r\n        return json({\r\n            success: true,\r\n            data: {\r\n                username: operator.username,\r\n                role: operator.role,\r\n                interviewer_id: operator.interviewer_id\r\n            }\r\n        }, 200, {\r\n            'Set-Cookie': createSessionCookie(sessionId)\r\n        });\r\n    } catch (e) {\r\n        const errorMessage = e instanceof Error ? e.message : 'Unknown error';\r\n        console.error('Login error:', errorMessage);\r\n        return json({ success: false, error: `Login failed: ${errorMessage}` }, 500);\r\n    }\r\n}\r\n\r\n\r\nexport async function handleLogout(request: Request, env: Env): Promise<Response> {\r\n    const sessionId = getSessionFromCookies(request);\r\n    if (sessionId) {\r\n        await deleteSession(env.DB, sessionId);\r\n    }\r\n\r\n    return json({ success: true }, 200, {\r\n        'Set-Cookie': createLogoutCookie()\r\n    });\r\n}\r\n\r\nexport async function handleGetMe(request: Request, env: Env): Promise<Response> {\r\n    const auth = await requireAuth(request, env);\r\n    if (auth instanceof Response) return auth;\r\n\r\n    return json({\r\n        success: true,\r\n        data: {\r\n            username: auth.operator.username,\r\n            role: auth.operator.role,\r\n            interviewer_id: auth.operator.interviewer_id\r\n        }\r\n    });\r\n}\r\n\r\n// ============ SECRETARY ROUTES ============\r\n\r\nexport async function handleRegisterStudent(request: Request, env: Env): Promise<Response> {\r\n    const auth = await requireSecretary(request, env);\r\n    if (auth instanceof Response) return auth;\r\n\r\n    try {\r\n        const body = await request.json() as RegisterStudentRequest;\r\n        const { first_name, last_name, email, phone, major, graduation_year } = body;\r\n\r\n        if (!first_name || !last_name) {\r\n            return json({ success: false, error: 'First name and last name required' }, 400);\r\n        }\r\n\r\n        const result = await env.DB.prepare(`\r\n      INSERT INTO interviewees (first_name, last_name, email, phone, major, graduation_year)\r\n      VALUES (?, ?, ?, ?, ?, ?)\r\n    `).bind(first_name, last_name, email || null, phone || null, major || null, graduation_year || null).run();\r\n\r\n        return json({\r\n            success: true,\r\n            data: { id: result.meta.last_row_id }\r\n        });\r\n    } catch (e) {\r\n        return json({ success: false, error: 'Failed to register student' }, 500);\r\n    }\r\n}\r\n\r\nexport async function handleEnqueueStudent(request: Request, env: Env): Promise<Response> {\r\n    const auth = await requireSecretary(request, env);\r\n    if (auth instanceof Response) return auth;\r\n\r\n    try {\r\n        const body = await request.json() as EnqueueRequest;\r\n        const { interviewee_id, interviewer_id } = body;\r\n\r\n        if (!interviewee_id || !interviewer_id) {\r\n            return json({ success: false, error: 'Student and company IDs required' }, 400);\r\n        }\r\n\r\n        // Get the next queue position for this interviewer\r\n        const lastPosition = await env.DB.prepare(`\r\n      SELECT MAX(queue_position) as max_pos FROM interviews \r\n      WHERE interviewer_id = ? AND status IN ('ENQUEUED', 'CALLING')\r\n    `).bind(interviewer_id).first<{ max_pos: number | null }>();\r\n\r\n        const queuePosition = (lastPosition?.max_pos || 0) + 1;\r\n\r\n        const result = await env.DB.prepare(`\r\n      INSERT INTO interviews (interviewee_id, interviewer_id, status, queue_position)\r\n      VALUES (?, ?, 'ENQUEUED', ?)\r\n    `).bind(interviewee_id, interviewer_id, queuePosition).run();\r\n\r\n        return json({\r\n            success: true,\r\n            data: { id: result.meta.last_row_id, queue_position: queuePosition }\r\n        });\r\n    } catch (e) {\r\n        return json({ success: false, error: 'Failed to enqueue student' }, 500);\r\n    }\r\n}\r\n\r\nexport async function handleGetStudents(request: Request, env: Env): Promise<Response> {\r\n    const auth = await requireSecretary(request, env);\r\n    if (auth instanceof Response) return auth;\r\n\r\n    const students = await env.DB.prepare(\r\n        'SELECT * FROM interviewees ORDER BY created_at DESC'\r\n    ).all<Interviewee>();\r\n\r\n    return json({ success: true, data: students.results });\r\n}\r\n\r\nexport async function handleGetInterviewers(request: Request, env: Env): Promise<Response> {\r\n    const auth = await requireAuth(request, env);\r\n    if (auth instanceof Response) return auth;\r\n\r\n    const interviewers = await env.DB.prepare(\r\n        'SELECT * FROM interviewers WHERE is_active = 1 ORDER BY name'\r\n    ).all<Interviewer>();\r\n\r\n    return json({ success: true, data: interviewers.results });\r\n}\r\n\r\nexport async function handleGetQueue(request: Request, env: Env): Promise<Response> {\r\n    const auth = await requireAuth(request, env);\r\n    if (auth instanceof Response) return auth;\r\n\r\n    const url = new URL(request.url);\r\n    const interviewerId = url.searchParams.get('interviewer_id');\r\n\r\n    let query = `\r\n    SELECT i.*, \r\n           ie.first_name, ie.last_name, ie.major,\r\n           ir.name as company_name\r\n    FROM interviews i\r\n    JOIN interviewees ie ON i.interviewee_id = ie.id\r\n    JOIN interviewers ir ON i.interviewer_id = ir.id\r\n    WHERE i.status IN ('ENQUEUED', 'CALLING', 'HAPPENING')\r\n  `;\r\n\r\n    const params: (string | number)[] = [];\r\n\r\n    if (interviewerId) {\r\n        query += ' AND i.interviewer_id = ?';\r\n        params.push(parseInt(interviewerId));\r\n    }\r\n\r\n    query += ' ORDER BY i.interviewer_id, i.queue_position';\r\n\r\n    const stmt = params.length > 0\r\n        ? env.DB.prepare(query).bind(...params)\r\n        : env.DB.prepare(query);\r\n\r\n    const queue = await stmt.all();\r\n\r\n    return json({ success: true, data: queue.results });\r\n}\r\n\r\n// ============ COMPANY ROUTES ============\r\n\r\nexport async function handleCallNext(request: Request, env: Env): Promise<Response> {\r\n    const auth = await requireAuth(request, env);\r\n    if (auth instanceof Response) return auth;\r\n\r\n    if (auth.operator.role !== 'COMPANY' || !auth.operator.interviewer_id) {\r\n        return json({ success: false, error: 'Company access required' }, 403);\r\n    }\r\n\r\n    const interviewerId = auth.operator.interviewer_id;\r\n\r\n    // Check if already calling someone\r\n    const calling = await env.DB.prepare(`\r\n    SELECT id FROM interviews \r\n    WHERE interviewer_id = ? AND status = 'CALLING'\r\n  `).bind(interviewerId).first();\r\n\r\n    if (calling) {\r\n        return json({ success: false, error: 'Already calling a student. Complete or mark as no-show first.' }, 400);\r\n    }\r\n\r\n    // Check if currently interviewing\r\n    const interviewing = await env.DB.prepare(`\r\n    SELECT id FROM interviews \r\n    WHERE interviewer_id = ? AND status = 'HAPPENING'\r\n  `).bind(interviewerId).first();\r\n\r\n    if (interviewing) {\r\n        return json({ success: false, error: 'Interview in progress. Complete it first.' }, 400);\r\n    }\r\n\r\n    // Get next in queue\r\n    const next = await env.DB.prepare(`\r\n    SELECT i.id, ie.first_name, ie.last_name\r\n    FROM interviews i\r\n    JOIN interviewees ie ON i.interviewee_id = ie.id\r\n    WHERE i.interviewer_id = ? AND i.status = 'ENQUEUED'\r\n    ORDER BY i.queue_position\r\n    LIMIT 1\r\n  `).bind(interviewerId).first<{ id: number; first_name: string; last_name: string }>();\r\n\r\n    if (!next) {\r\n        return json({ success: false, error: 'No students in queue' }, 404);\r\n    }\r\n\r\n    // Update status to CALLING\r\n    await env.DB.prepare(`\r\n    UPDATE interviews SET status = 'CALLING', called_at = datetime('now')\r\n    WHERE id = ?\r\n  `).bind(next.id).run();\r\n\r\n    return json({\r\n        success: true,\r\n        data: {\r\n            interview_id: next.id,\r\n            student_name: `${next.first_name} ${next.last_name}`\r\n        }\r\n    });\r\n}\r\n\r\nexport async function handleStartInterview(request: Request, env: Env): Promise<Response> {\r\n    const auth = await requireAuth(request, env);\r\n    if (auth instanceof Response) return auth;\r\n\r\n    if (auth.operator.role !== 'COMPANY' || !auth.operator.interviewer_id) {\r\n        return json({ success: false, error: 'Company access required' }, 403);\r\n    }\r\n\r\n    const interviewerId = auth.operator.interviewer_id;\r\n\r\n    // Get the currently calling interview\r\n    const calling = await env.DB.prepare(`\r\n    SELECT id FROM interviews \r\n    WHERE interviewer_id = ? AND status = 'CALLING'\r\n  `).bind(interviewerId).first<{ id: number }>();\r\n\r\n    if (!calling) {\r\n        return json({ success: false, error: 'No student being called' }, 404);\r\n    }\r\n\r\n    // Update to HAPPENING\r\n    await env.DB.prepare(`\r\n    UPDATE interviews SET status = 'HAPPENING', started_at = datetime('now')\r\n    WHERE id = ?\r\n  `).bind(calling.id).run();\r\n\r\n    return json({ success: true, data: { interview_id: calling.id } });\r\n}\r\n\r\nexport async function handleCompleteInterview(request: Request, env: Env): Promise<Response> {\r\n    const auth = await requireAuth(request, env);\r\n    if (auth instanceof Response) return auth;\r\n\r\n    if (auth.operator.role !== 'COMPANY' || !auth.operator.interviewer_id) {\r\n        return json({ success: false, error: 'Company access required' }, 403);\r\n    }\r\n\r\n    const interviewerId = auth.operator.interviewer_id;\r\n    const body = await request.json() as { notes?: string };\r\n\r\n    // Get the current interview (either CALLING or HAPPENING)\r\n    const current = await env.DB.prepare(`\r\n    SELECT id, status FROM interviews \r\n    WHERE interviewer_id = ? AND status IN ('CALLING', 'HAPPENING')\r\n  `).bind(interviewerId).first<{ id: number; status: string }>();\r\n\r\n    if (!current) {\r\n        return json({ success: false, error: 'No active interview' }, 404);\r\n    }\r\n\r\n    // Complete the interview\r\n    await env.DB.prepare(`\r\n    UPDATE interviews \r\n    SET status = 'COMPLETED', completed_at = datetime('now'), notes = ?\r\n    WHERE id = ?\r\n  `).bind(body.notes || null, current.id).run();\r\n\r\n    return json({ success: true, data: { interview_id: current.id } });\r\n}\r\n\r\nexport async function handleNoShow(request: Request, env: Env): Promise<Response> {\r\n    const auth = await requireAuth(request, env);\r\n    if (auth instanceof Response) return auth;\r\n\r\n    if (auth.operator.role !== 'COMPANY' || !auth.operator.interviewer_id) {\r\n        return json({ success: false, error: 'Company access required' }, 403);\r\n    }\r\n\r\n    const interviewerId = auth.operator.interviewer_id;\r\n\r\n    // Get the currently calling interview\r\n    const calling = await env.DB.prepare(`\r\n    SELECT id FROM interviews \r\n    WHERE interviewer_id = ? AND status = 'CALLING'\r\n  `).bind(interviewerId).first<{ id: number }>();\r\n\r\n    if (!calling) {\r\n        return json({ success: false, error: 'No student being called' }, 404);\r\n    }\r\n\r\n    // Mark as NO_SHOW\r\n    await env.DB.prepare(`\r\n    UPDATE interviews SET status = 'NO_SHOW', completed_at = datetime('now')\r\n    WHERE id = ?\r\n  `).bind(calling.id).run();\r\n\r\n    return json({ success: true, data: { interview_id: calling.id } });\r\n}\r\n\r\n// ============ PUBLIC ROUTES ============\r\n\r\nexport async function handleDashboard(env: Env): Promise<Response> {\r\n    // Get all active interviewers with their current status\r\n    const interviewers = await env.DB.prepare(`\r\n    SELECT \r\n      ir.id, ir.name, ir.table_number, ir.is_paused,\r\n      (SELECT COUNT(*) FROM interviews i WHERE i.interviewer_id = ir.id AND i.status = 'ENQUEUED') as queue_length,\r\n      (SELECT i.status FROM interviews i WHERE i.interviewer_id = ir.id AND i.status IN ('CALLING', 'HAPPENING') LIMIT 1) as current_status,\r\n      (SELECT ie.first_name || ' ' || ie.last_name \r\n       FROM interviews i \r\n       JOIN interviewees ie ON i.interviewee_id = ie.id \r\n       WHERE i.interviewer_id = ir.id AND i.status IN ('CALLING', 'HAPPENING') \r\n       LIMIT 1) as current_student\r\n    FROM interviewers ir\r\n    WHERE ir.is_active = 1\r\n    ORDER BY ir.name\r\n  `).all<{\r\n        id: number;\r\n        name: string;\r\n        table_number: string | null;\r\n        is_paused: number;\r\n        queue_length: number;\r\n        current_status: string | null;\r\n        current_student: string | null;\r\n    }>();\r\n\r\n    const interviewerStatuses: InterviewerStatus[] = interviewers.results.map(ir => ({\r\n        id: ir.id,\r\n        name: ir.name,\r\n        table_number: ir.table_number,\r\n        status: ir.is_paused ? 'PAUSED' :\r\n            ir.current_status === 'CALLING' ? 'CALLING' :\r\n                ir.current_status === 'HAPPENING' ? 'INTERVIEWING' : 'IDLE',\r\n        current_student: ir.current_student,\r\n        queue_length: ir.queue_length,\r\n        is_paused: ir.is_paused\r\n    }));\r\n\r\n\r\n    // Get recent calls\r\n    const recentCalls = await env.DB.prepare(`\r\n    SELECT \r\n      ir.name as company,\r\n      ie.first_name || ' ' || ie.last_name as student,\r\n      i.called_at\r\n    FROM interviews i\r\n    JOIN interviewers ir ON i.interviewer_id = ir.id\r\n    JOIN interviewees ie ON i.interviewee_id = ie.id\r\n    WHERE i.called_at IS NOT NULL\r\n    ORDER BY i.called_at DESC\r\n    LIMIT 10\r\n  `).all<{ company: string; student: string; called_at: string }>();\r\n\r\n    const dashboardData: DashboardData = {\r\n        interviewers: interviewerStatuses,\r\n        recent_calls: recentCalls.results\r\n    };\r\n\r\n    return json({ success: true, data: dashboardData });\r\n}\r\n\r\n// ============ INTERVIEWER CRUD (Secretary) ============\r\n\r\nexport async function handleCreateInterviewer(request: Request, env: Env): Promise<Response> {\r\n    const auth = await requireSecretary(request, env);\r\n    if (auth instanceof Response) return auth;\r\n\r\n    try {\r\n        const body = await request.json() as CreateInterviewerRequest;\r\n        const { name, table_number } = body;\r\n\r\n        if (!name) {\r\n            return json({ success: false, error: 'Company name required' }, 400);\r\n        }\r\n\r\n        const result = await env.DB.prepare(`\r\n      INSERT INTO interviewers (name, table_number, is_active, is_paused)\r\n      VALUES (?, ?, 1, 0)\r\n    `).bind(name, table_number || null).run();\r\n\r\n        return json({\r\n            success: true,\r\n            data: { id: result.meta.last_row_id }\r\n        });\r\n    } catch (e) {\r\n        return json({ success: false, error: 'Failed to create company' }, 500);\r\n    }\r\n}\r\n\r\nexport async function handleUpdateInterviewer(request: Request, env: Env): Promise<Response> {\r\n    const auth = await requireSecretaryOrGatekeeper(request, env);\r\n    if (auth instanceof Response) return auth;\r\n\r\n    try {\r\n        const url = new URL(request.url);\r\n        const id = url.searchParams.get('id');\r\n        if (!id) {\r\n            return json({ success: false, error: 'Interviewer ID required' }, 400);\r\n        }\r\n\r\n        const body = await request.json() as UpdateInterviewerRequest;\r\n        const { name, table_number, is_paused } = body;\r\n\r\n        // Build dynamic update query\r\n        const updates: string[] = [];\r\n        const values: (string | number)[] = [];\r\n\r\n        if (name !== undefined) {\r\n            updates.push('name = ?');\r\n            values.push(name);\r\n        }\r\n        if (table_number !== undefined) {\r\n            updates.push('table_number = ?');\r\n            values.push(table_number);\r\n        }\r\n        if (is_paused !== undefined) {\r\n            updates.push('is_paused = ?');\r\n            values.push(is_paused ? 1 : 0);\r\n        }\r\n\r\n        if (updates.length === 0) {\r\n            return json({ success: false, error: 'No fields to update' }, 400);\r\n        }\r\n\r\n        values.push(parseInt(id));\r\n\r\n        await env.DB.prepare(`\r\n      UPDATE interviewers SET ${updates.join(', ')} WHERE id = ?\r\n    `).bind(...values).run();\r\n\r\n        return json({ success: true });\r\n    } catch (e) {\r\n        return json({ success: false, error: 'Failed to update company' }, 500);\r\n    }\r\n}\r\n\r\nexport async function handleDeleteInterviewer(request: Request, env: Env): Promise<Response> {\r\n    const auth = await requireSecretary(request, env);\r\n    if (auth instanceof Response) return auth;\r\n\r\n    try {\r\n        const url = new URL(request.url);\r\n        const id = url.searchParams.get('id');\r\n        if (!id) {\r\n            return json({ success: false, error: 'Interviewer ID required' }, 400);\r\n        }\r\n\r\n        // Soft delete by setting is_active to 0\r\n        await env.DB.prepare(`\r\n      UPDATE interviewers SET is_active = 0 WHERE id = ?\r\n    `).bind(parseInt(id)).run();\r\n\r\n        return json({ success: true });\r\n    } catch (e) {\r\n        return json({ success: false, error: 'Failed to delete company' }, 500);\r\n    }\r\n}\r\n\r\n// ============ STUDENT CRUD EXTENSIONS ============\r\n\r\nexport async function handleDeleteStudent(request: Request, env: Env): Promise<Response> {\r\n    const auth = await requireSecretary(request, env);\r\n    if (auth instanceof Response) return auth;\r\n\r\n    try {\r\n        const url = new URL(request.url);\r\n        const id = url.searchParams.get('id');\r\n        if (!id) {\r\n            return json({ success: false, error: 'Student ID required' }, 400);\r\n        }\r\n\r\n        // Delete any pending interviews first\r\n        await env.DB.prepare(`\r\n      DELETE FROM interviews WHERE interviewee_id = ? AND status = 'ENQUEUED'\r\n    `).bind(parseInt(id)).run();\r\n\r\n        // Delete the student\r\n        await env.DB.prepare(`\r\n      DELETE FROM interviewees WHERE id = ?\r\n    `).bind(parseInt(id)).run();\r\n\r\n        return json({ success: true });\r\n    } catch (e) {\r\n        return json({ success: false, error: 'Failed to delete student' }, 500);\r\n    }\r\n}\r\n\r\nexport async function handleToggleStudentPause(request: Request, env: Env): Promise<Response> {\r\n    const auth = await requireSecretaryOrGatekeeper(request, env);\r\n    if (auth instanceof Response) return auth;\r\n\r\n    try {\r\n        const url = new URL(request.url);\r\n        const id = url.searchParams.get('id');\r\n        if (!id) {\r\n            return json({ success: false, error: 'Student ID required' }, 400);\r\n        }\r\n\r\n        // Toggle is_paused\r\n        await env.DB.prepare(`\r\n      UPDATE interviewees SET is_paused = 1 - is_paused WHERE id = ?\r\n    `).bind(parseInt(id)).run();\r\n\r\n        return json({ success: true });\r\n    } catch (e) {\r\n        return json({ success: false, error: 'Failed to toggle pause' }, 500);\r\n    }\r\n}\r\n\r\nexport async function handleToggleInterviewerPause(request: Request, env: Env): Promise<Response> {\r\n    const auth = await requireSecretaryOrGatekeeper(request, env);\r\n    if (auth instanceof Response) return auth;\r\n\r\n    try {\r\n        const url = new URL(request.url);\r\n        const id = url.searchParams.get('id');\r\n        if (!id) {\r\n            return json({ success: false, error: 'Interviewer ID required' }, 400);\r\n        }\r\n\r\n        // Toggle is_paused\r\n        await env.DB.prepare(`\r\n      UPDATE interviewers SET is_paused = 1 - is_paused WHERE id = ?\r\n    `).bind(parseInt(id)).run();\r\n\r\n        return json({ success: true });\r\n    } catch (e) {\r\n        return json({ success: false, error: 'Failed to toggle pause' }, 500);\r\n    }\r\n}\r\n\r\n// ============ GATEKEEPER ROUTES ============\r\n\r\nexport async function handleGatekeeperCallNext(request: Request, env: Env): Promise<Response> {\r\n    const auth = await requireGatekeeper(request, env);\r\n    if (auth instanceof Response) return auth;\r\n\r\n    try {\r\n        const body = await request.json() as { interviewer_id: number };\r\n        const interviewerId = body.interviewer_id;\r\n\r\n        if (!interviewerId) {\r\n            return json({ success: false, error: 'Interviewer ID required' }, 400);\r\n        }\r\n\r\n        // Check if interviewer is paused\r\n        const interviewer = await env.DB.prepare(`\r\n      SELECT is_paused FROM interviewers WHERE id = ?\r\n    `).bind(interviewerId).first<{ is_paused: number }>();\r\n\r\n        if (interviewer?.is_paused) {\r\n            return json({ success: false, error: 'Interviewer is paused' }, 400);\r\n        }\r\n\r\n        // Check if already calling someone\r\n        const calling = await env.DB.prepare(`\r\n      SELECT id FROM interviews WHERE interviewer_id = ? AND status = 'CALLING'\r\n    `).bind(interviewerId).first();\r\n\r\n        if (calling) {\r\n            return json({ success: false, error: 'Already calling a student' }, 400);\r\n        }\r\n\r\n        // Get next available (non-paused) student in queue\r\n        const next = await env.DB.prepare(`\r\n      SELECT i.id, ie.first_name, ie.last_name\r\n      FROM interviews i\r\n      JOIN interviewees ie ON i.interviewee_id = ie.id\r\n      WHERE i.interviewer_id = ? AND i.status = 'ENQUEUED' AND ie.is_paused = 0\r\n      ORDER BY i.queue_position\r\n      LIMIT 1\r\n    `).bind(interviewerId).first<{ id: number; first_name: string; last_name: string }>();\r\n\r\n        if (!next) {\r\n            return json({ success: false, error: 'No available students in queue' }, 404);\r\n        }\r\n\r\n        await env.DB.prepare(`\r\n      UPDATE interviews SET status = 'CALLING', called_at = datetime('now') WHERE id = ?\r\n    `).bind(next.id).run();\r\n\r\n        return json({\r\n            success: true,\r\n            data: { interview_id: next.id, student_name: `${next.first_name} ${next.last_name}` }\r\n        });\r\n    } catch (e) {\r\n        return json({ success: false, error: 'Failed to call next' }, 500);\r\n    }\r\n}\r\n\r\nexport async function handleGatekeeperAction(request: Request, env: Env): Promise<Response> {\r\n    const auth = await requireGatekeeper(request, env);\r\n    if (auth instanceof Response) return auth;\r\n\r\n    try {\r\n        const body = await request.json() as { interview_id: number; action: 'start' | 'complete' | 'no_show' | 'dequeue' };\r\n        const { interview_id, action } = body;\r\n\r\n        if (!interview_id || !action) {\r\n            return json({ success: false, error: 'Interview ID and action required' }, 400);\r\n        }\r\n\r\n        if (action === 'start') {\r\n            await env.DB.prepare(`\r\n        UPDATE interviews SET status = 'HAPPENING', started_at = datetime('now') WHERE id = ?\r\n      `).bind(interview_id).run();\r\n        } else if (action === 'complete') {\r\n            await env.DB.prepare(`\r\n        UPDATE interviews SET status = 'COMPLETED', completed_at = datetime('now') WHERE id = ?\r\n      `).bind(interview_id).run();\r\n        } else if (action === 'no_show') {\r\n            await env.DB.prepare(`\r\n        UPDATE interviews SET status = 'NO_SHOW', completed_at = datetime('now') WHERE id = ?\r\n      `).bind(interview_id).run();\r\n        } else if (action === 'dequeue') {\r\n            await env.DB.prepare(`\r\n        DELETE FROM interviews WHERE id = ?\r\n      `).bind(interview_id).run();\r\n        }\r\n\r\n        return json({ success: true });\r\n    } catch (e) {\r\n        return json({ success: false, error: 'Failed to perform action' }, 500);\r\n    }\r\n}\r\n\r\nexport async function handleGatekeeperQueue(request: Request, env: Env): Promise<Response> {\r\n    const auth = await requireGatekeeper(request, env);\r\n    if (auth instanceof Response) return auth;\r\n\r\n    // Get all active interviews grouped by interviewer\r\n    const queue = await env.DB.prepare(`\r\n    SELECT i.*, \r\n           ie.first_name, ie.last_name, ie.major, ie.is_paused as student_paused,\r\n           ir.name as company_name, ir.is_paused as company_paused\r\n    FROM interviews i\r\n    JOIN interviewees ie ON i.interviewee_id = ie.id\r\n    JOIN interviewers ir ON i.interviewer_id = ir.id\r\n    WHERE i.status IN ('ENQUEUED', 'CALLING', 'HAPPENING')\r\n    ORDER BY ir.name, i.queue_position\r\n  `).all();\r\n\r\n    return json({ success: true, data: queue.results });\r\n}\r\n", "// Public Dashboard Page - Real-time view of company statuses\r\nexport function getPublicDashboardHtml(): string {\r\n    return `<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n  <meta charset=\"UTF-8\">\r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n  <title>Career Fair - Live Dashboard</title>\r\n  <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\r\n  <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\r\n  <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap\" rel=\"stylesheet\">\r\n  <style>\r\n    :root {\r\n      --bg-primary: #0f0f23;\r\n      --bg-secondary: #1a1a2e;\r\n      --bg-card: #16213e;\r\n      --accent-primary: #6366f1;\r\n      --accent-secondary: #8b5cf6;\r\n      --accent-success: #10b981;\r\n      --accent-warning: #f59e0b;\r\n      --accent-danger: #ef4444;\r\n      --text-primary: #f8fafc;\r\n      --text-secondary: #94a3b8;\r\n      --border: rgba(255, 255, 255, 0.1);\r\n      --shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);\r\n    }\r\n\r\n    * {\r\n      margin: 0;\r\n      padding: 0;\r\n      box-sizing: border-box;\r\n    }\r\n\r\n    body {\r\n      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\r\n      background: var(--bg-primary);\r\n      color: var(--text-primary);\r\n      min-height: 100vh;\r\n      background-image: \r\n        radial-gradient(ellipse at 20% 20%, rgba(99, 102, 241, 0.15) 0%, transparent 50%),\r\n        radial-gradient(ellipse at 80% 80%, rgba(139, 92, 246, 0.15) 0%, transparent 50%);\r\n    }\r\n\r\n    .container {\r\n      max-width: 1400px;\r\n      margin: 0 auto;\r\n      padding: 2rem;\r\n    }\r\n\r\n    header {\r\n      text-align: center;\r\n      margin-bottom: 3rem;\r\n    }\r\n\r\n    h1 {\r\n      font-size: 3rem;\r\n      font-weight: 700;\r\n      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));\r\n      -webkit-background-clip: text;\r\n      -webkit-text-fill-color: transparent;\r\n      background-clip: text;\r\n      margin-bottom: 0.5rem;\r\n    }\r\n\r\n    .subtitle {\r\n      color: var(--text-secondary);\r\n      font-size: 1.1rem;\r\n    }\r\n\r\n    .live-indicator {\r\n      display: inline-flex;\r\n      align-items: center;\r\n      gap: 0.5rem;\r\n      background: rgba(16, 185, 129, 0.1);\r\n      color: var(--accent-success);\r\n      padding: 0.5rem 1rem;\r\n      border-radius: 2rem;\r\n      font-size: 0.875rem;\r\n      font-weight: 500;\r\n      margin-top: 1rem;\r\n    }\r\n\r\n    .live-dot {\r\n      width: 8px;\r\n      height: 8px;\r\n      background: var(--accent-success);\r\n      border-radius: 50%;\r\n      animation: pulse 2s infinite;\r\n    }\r\n\r\n    @keyframes pulse {\r\n      0%, 100% { opacity: 1; }\r\n      50% { opacity: 0.5; }\r\n    }\r\n\r\n    .grid {\r\n      display: grid;\r\n      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\r\n      gap: 1.5rem;\r\n    }\r\n\r\n    .company-card {\r\n      background: var(--bg-card);\r\n      border-radius: 1rem;\r\n      padding: 1.5rem;\r\n      border: 1px solid var(--border);\r\n      transition: all 0.3s ease;\r\n      position: relative;\r\n      overflow: hidden;\r\n    }\r\n\r\n    .company-card::before {\r\n      content: '';\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      right: 0;\r\n      height: 4px;\r\n      background: var(--status-color, var(--text-secondary));\r\n    }\r\n\r\n    .company-card.idle { --status-color: var(--text-secondary); }\r\n    .company-card.calling { \r\n      --status-color: var(--accent-warning);\r\n      animation: glow 2s ease-in-out infinite;\r\n    }\r\n    .company-card.interviewing { --status-color: var(--accent-success); }\r\n\r\n    @keyframes glow {\r\n      0%, 100% { box-shadow: 0 0 20px rgba(245, 158, 11, 0.3); }\r\n      50% { box-shadow: 0 0 40px rgba(245, 158, 11, 0.5); }\r\n    }\r\n\r\n    .company-header {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: flex-start;\r\n      margin-bottom: 1rem;\r\n    }\r\n\r\n    .company-name {\r\n      font-size: 1.25rem;\r\n      font-weight: 600;\r\n    }\r\n\r\n    .table-number {\r\n      background: rgba(255, 255, 255, 0.1);\r\n      padding: 0.25rem 0.75rem;\r\n      border-radius: 0.5rem;\r\n      font-size: 0.875rem;\r\n      font-weight: 500;\r\n    }\r\n\r\n    .status-badge {\r\n      display: inline-flex;\r\n      align-items: center;\r\n      gap: 0.5rem;\r\n      padding: 0.5rem 1rem;\r\n      border-radius: 0.5rem;\r\n      font-size: 0.875rem;\r\n      font-weight: 600;\r\n      text-transform: uppercase;\r\n      letter-spacing: 0.05em;\r\n    }\r\n\r\n    .status-idle {\r\n      background: rgba(148, 163, 184, 0.1);\r\n      color: var(--text-secondary);\r\n    }\r\n\r\n    .status-calling {\r\n      background: rgba(245, 158, 11, 0.15);\r\n      color: var(--accent-warning);\r\n    }\r\n\r\n    .status-interviewing {\r\n      background: rgba(16, 185, 129, 0.15);\r\n      color: var(--accent-success);\r\n    }\r\n\r\n    .student-name {\r\n      font-size: 1.5rem;\r\n      font-weight: 700;\r\n      margin: 1rem 0;\r\n      color: var(--text-primary);\r\n    }\r\n\r\n    .queue-info {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 0.5rem;\r\n      color: var(--text-secondary);\r\n      font-size: 0.875rem;\r\n      margin-top: 1rem;\r\n      padding-top: 1rem;\r\n      border-top: 1px solid var(--border);\r\n    }\r\n\r\n    .queue-count {\r\n      font-weight: 600;\r\n      color: var(--accent-primary);\r\n    }\r\n\r\n    .recent-calls {\r\n      margin-top: 3rem;\r\n      background: var(--bg-secondary);\r\n      border-radius: 1rem;\r\n      padding: 1.5rem;\r\n      border: 1px solid var(--border);\r\n    }\r\n\r\n    .recent-calls h2 {\r\n      font-size: 1.25rem;\r\n      margin-bottom: 1rem;\r\n      color: var(--text-secondary);\r\n    }\r\n\r\n    .call-list {\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 0.75rem;\r\n    }\r\n\r\n    .call-item {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      padding: 0.75rem;\r\n      background: var(--bg-card);\r\n      border-radius: 0.5rem;\r\n    }\r\n\r\n    .call-info {\r\n      display: flex;\r\n      gap: 1rem;\r\n    }\r\n\r\n    .call-company {\r\n      color: var(--accent-primary);\r\n      font-weight: 500;\r\n    }\r\n\r\n    .call-student {\r\n      color: var(--text-primary);\r\n    }\r\n\r\n    .call-time {\r\n      color: var(--text-secondary);\r\n      font-size: 0.875rem;\r\n    }\r\n\r\n    .login-link {\r\n      position: fixed;\r\n      bottom: 2rem;\r\n      right: 2rem;\r\n      background: var(--bg-card);\r\n      color: var(--text-secondary);\r\n      padding: 0.75rem 1.5rem;\r\n      border-radius: 0.5rem;\r\n      text-decoration: none;\r\n      font-size: 0.875rem;\r\n      border: 1px solid var(--border);\r\n      transition: all 0.2s;\r\n    }\r\n\r\n    .login-link:hover {\r\n      background: var(--accent-primary);\r\n      color: white;\r\n      border-color: var(--accent-primary);\r\n    }\r\n\r\n    .empty-state {\r\n      text-align: center;\r\n      padding: 4rem 2rem;\r\n      color: var(--text-secondary);\r\n    }\r\n\r\n    .empty-state svg {\r\n      width: 64px;\r\n      height: 64px;\r\n      margin-bottom: 1rem;\r\n      opacity: 0.5;\r\n    }\r\n  </style>\r\n</head>\r\n<body>\r\n  <div class=\"container\">\r\n    <header>\r\n      <h1>Career Fair</h1>\r\n      <p class=\"subtitle\">Live Interview Queue Dashboard</p>\r\n      <div class=\"live-indicator\">\r\n        <span class=\"live-dot\"></span>\r\n        <span>Live \u2022 Auto-refreshing every 3s</span>\r\n      </div>\r\n    </header>\r\n\r\n    <div id=\"dashboard\" class=\"grid\">\r\n      <div class=\"empty-state\">\r\n        <p>Loading...</p>\r\n      </div>\r\n    </div>\r\n\r\n    <div id=\"recent-calls\" class=\"recent-calls\" style=\"display: none;\">\r\n      <h2>\uD83D\uDCE2 Recent Calls</h2>\r\n      <div class=\"call-list\" id=\"call-list\"></div>\r\n    </div>\r\n  </div>\r\n\r\n  <a href=\"/login\" class=\"login-link\">Operator Login \u2192</a>\r\n\r\n  <script>\r\n    async function fetchDashboard() {\r\n      try {\r\n        const res = await fetch('/api/dashboard');\r\n        const data = await res.json();\r\n        \r\n        if (data.success) {\r\n          renderDashboard(data.data);\r\n        }\r\n      } catch (e) {\r\n        console.error('Failed to fetch dashboard:', e);\r\n      }\r\n    }\r\n\r\n    function renderDashboard(data) {\r\n      const dashboard = document.getElementById('dashboard');\r\n      const recentCallsSection = document.getElementById('recent-calls');\r\n      const callList = document.getElementById('call-list');\r\n\r\n      if (!data.interviewers || data.interviewers.length === 0) {\r\n        dashboard.innerHTML = '<div class=\"empty-state\"><p>No companies registered yet</p></div>';\r\n        return;\r\n      }\r\n\r\n      dashboard.innerHTML = data.interviewers.map(company => {\r\n        const statusClass = company.status.toLowerCase();\r\n        const statusLabel = company.status === 'IDLE' ? 'Available' : \r\n                           company.status === 'CALLING' ? 'Now Calling' : 'Interviewing';\r\n        \r\n        return \\`\r\n          <div class=\"company-card \\${statusClass}\">\r\n            <div class=\"company-header\">\r\n              <span class=\"company-name\">\\${company.name}</span>\r\n              \\${company.table_number ? \\`<span class=\"table-number\">Table \\${company.table_number}</span>\\` : ''}\r\n            </div>\r\n            <span class=\"status-badge status-\\${statusClass}\">\\${statusLabel}</span>\r\n            \\${company.current_student ? \\`<div class=\"student-name\">\\${company.current_student}</div>\\` : ''}\r\n            <div class=\"queue-info\">\r\n              <span class=\"queue-count\">\\${company.queue_length}</span>\r\n              <span>student\\${company.queue_length !== 1 ? 's' : ''} in queue</span>\r\n            </div>\r\n          </div>\r\n        \\`;\r\n      }).join('');\r\n\r\n      // Recent calls\r\n      if (data.recent_calls && data.recent_calls.length > 0) {\r\n        recentCallsSection.style.display = 'block';\r\n        callList.innerHTML = data.recent_calls.map(call => \\`\r\n          <div class=\"call-item\">\r\n            <div class=\"call-info\">\r\n              <span class=\"call-company\">\\${call.company}</span>\r\n              <span class=\"call-student\">\\${call.student}</span>\r\n            </div>\r\n            <span class=\"call-time\">\\${new Date(call.called_at).toLocaleTimeString()}</span>\r\n          </div>\r\n        \\`).join('');\r\n      } else {\r\n        recentCallsSection.style.display = 'none';\r\n      }\r\n    }\r\n\r\n    // Initial fetch\r\n    fetchDashboard();\r\n\r\n    // Auto-refresh every 3 seconds\r\n    setInterval(fetchDashboard, 3000);\r\n  </script>\r\n</body>\r\n</html>`;\r\n}\r\n", "// Login Page\r\nexport function getLoginPageHtml(): string {\r\n    return `<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n  <meta charset=\"UTF-8\">\r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n  <title>Login - Career Fair</title>\r\n  <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\r\n  <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\r\n  <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap\" rel=\"stylesheet\">\r\n  <style>\r\n    :root {\r\n      --bg-primary: #0f0f23;\r\n      --bg-secondary: #1a1a2e;\r\n      --bg-card: #16213e;\r\n      --accent-primary: #6366f1;\r\n      --accent-secondary: #8b5cf6;\r\n      --accent-success: #10b981;\r\n      --accent-danger: #ef4444;\r\n      --text-primary: #f8fafc;\r\n      --text-secondary: #94a3b8;\r\n      --border: rgba(255, 255, 255, 0.1);\r\n    }\r\n\r\n    * {\r\n      margin: 0;\r\n      padding: 0;\r\n      box-sizing: border-box;\r\n    }\r\n\r\n    body {\r\n      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\r\n      background: var(--bg-primary);\r\n      color: var(--text-primary);\r\n      min-height: 100vh;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      background-image: \r\n        radial-gradient(ellipse at 20% 20%, rgba(99, 102, 241, 0.15) 0%, transparent 50%),\r\n        radial-gradient(ellipse at 80% 80%, rgba(139, 92, 246, 0.15) 0%, transparent 50%);\r\n    }\r\n\r\n    .login-container {\r\n      width: 100%;\r\n      max-width: 420px;\r\n      padding: 2rem;\r\n    }\r\n\r\n    .login-card {\r\n      background: var(--bg-card);\r\n      border-radius: 1.5rem;\r\n      padding: 2.5rem;\r\n      border: 1px solid var(--border);\r\n      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);\r\n    }\r\n\r\n    .logo {\r\n      text-align: center;\r\n      margin-bottom: 2rem;\r\n    }\r\n\r\n    .logo h1 {\r\n      font-size: 2rem;\r\n      font-weight: 700;\r\n      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));\r\n      -webkit-background-clip: text;\r\n      -webkit-text-fill-color: transparent;\r\n      background-clip: text;\r\n    }\r\n\r\n    .logo p {\r\n      color: var(--text-secondary);\r\n      margin-top: 0.5rem;\r\n    }\r\n\r\n    .form-group {\r\n      margin-bottom: 1.5rem;\r\n    }\r\n\r\n    label {\r\n      display: block;\r\n      margin-bottom: 0.5rem;\r\n      font-size: 0.875rem;\r\n      font-weight: 500;\r\n      color: var(--text-secondary);\r\n    }\r\n\r\n    input {\r\n      width: 100%;\r\n      padding: 0.875rem 1rem;\r\n      background: var(--bg-secondary);\r\n      border: 1px solid var(--border);\r\n      border-radius: 0.75rem;\r\n      color: var(--text-primary);\r\n      font-size: 1rem;\r\n      font-family: inherit;\r\n      transition: all 0.2s;\r\n    }\r\n\r\n    input:focus {\r\n      outline: none;\r\n      border-color: var(--accent-primary);\r\n      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);\r\n    }\r\n\r\n    input::placeholder {\r\n      color: var(--text-secondary);\r\n      opacity: 0.5;\r\n    }\r\n\r\n    .btn {\r\n      width: 100%;\r\n      padding: 1rem;\r\n      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));\r\n      border: none;\r\n      border-radius: 0.75rem;\r\n      color: white;\r\n      font-size: 1rem;\r\n      font-weight: 600;\r\n      font-family: inherit;\r\n      cursor: pointer;\r\n      transition: all 0.2s;\r\n    }\r\n\r\n    .btn:hover {\r\n      transform: translateY(-2px);\r\n      box-shadow: 0 10px 20px rgba(99, 102, 241, 0.3);\r\n    }\r\n\r\n    .btn:active {\r\n      transform: translateY(0);\r\n    }\r\n\r\n    .btn:disabled {\r\n      opacity: 0.5;\r\n      cursor: not-allowed;\r\n      transform: none;\r\n    }\r\n\r\n    .error-message {\r\n      background: rgba(239, 68, 68, 0.1);\r\n      color: var(--accent-danger);\r\n      padding: 0.875rem 1rem;\r\n      border-radius: 0.75rem;\r\n      margin-bottom: 1.5rem;\r\n      font-size: 0.875rem;\r\n      display: none;\r\n    }\r\n\r\n    .back-link {\r\n      display: block;\r\n      text-align: center;\r\n      margin-top: 1.5rem;\r\n      color: var(--text-secondary);\r\n      text-decoration: none;\r\n      font-size: 0.875rem;\r\n      transition: color 0.2s;\r\n    }\r\n\r\n    .back-link:hover {\r\n      color: var(--accent-primary);\r\n    }\r\n  </style>\r\n</head>\r\n<body>\r\n  <div class=\"login-container\">\r\n    <div class=\"login-card\">\r\n      <div class=\"logo\">\r\n        <h1>Career Fair</h1>\r\n        <p>Operator Login</p>\r\n      </div>\r\n\r\n      <div id=\"error\" class=\"error-message\"></div>\r\n\r\n      <form id=\"login-form\">\r\n        <div class=\"form-group\">\r\n          <label for=\"username\">Username</label>\r\n          <input type=\"text\" id=\"username\" name=\"username\" placeholder=\"Enter your username\" required autocomplete=\"username\">\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label for=\"password\">Password</label>\r\n          <input type=\"password\" id=\"password\" name=\"password\" placeholder=\"Enter your password\" required autocomplete=\"current-password\">\r\n        </div>\r\n\r\n        <button type=\"submit\" class=\"btn\" id=\"submit-btn\">Sign In</button>\r\n      </form>\r\n\r\n      <a href=\"/\" class=\"back-link\">\u2190 Back to Dashboard</a>\r\n    </div>\r\n  </div>\r\n\r\n  <script>\r\n    const form = document.getElementById('login-form');\r\n    const errorEl = document.getElementById('error');\r\n    const submitBtn = document.getElementById('submit-btn');\r\n\r\n    form.addEventListener('submit', async (e) => {\r\n      e.preventDefault();\r\n      \r\n      const username = document.getElementById('username').value;\r\n      const password = document.getElementById('password').value;\r\n\r\n      submitBtn.disabled = true;\r\n      submitBtn.textContent = 'Signing in...';\r\n      errorEl.style.display = 'none';\r\n\r\n      try {\r\n        const res = await fetch('/api/auth/login', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ username, password })\r\n        });\r\n\r\n        const data = await res.json();\r\n\r\n        if (data.success) {\r\n          // Redirect based on role\r\n          if (data.data.role === 'SECRETARY') {\r\n            window.location.href = '/secretary';\r\n          } else if (data.data.role === 'COMPANY') {\r\n            window.location.href = '/company';\r\n          }\r\n        } else {\r\n          errorEl.textContent = data.error || 'Login failed';\r\n          errorEl.style.display = 'block';\r\n        }\r\n      } catch (e) {\r\n        errorEl.textContent = 'Connection error. Please try again.';\r\n        errorEl.style.display = 'block';\r\n      }\r\n\r\n      submitBtn.disabled = false;\r\n      submitBtn.textContent = 'Sign In';\r\n    });\r\n  </script>\r\n</body>\r\n</html>`;\r\n}\r\n", "// Secretary Operator Page - Student registration and queue management\r\nexport function getSecretaryPageHtml(): string {\r\n  return `<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n  <meta charset=\"UTF-8\">\r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n  <title>Secretary Panel - Career Fair</title>\r\n  <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\r\n  <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\r\n  <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap\" rel=\"stylesheet\">\r\n  <style>\r\n    :root {\r\n      --bg-primary: #0f0f23;\r\n      --bg-secondary: #1a1a2e;\r\n      --bg-card: #16213e;\r\n      --accent-primary: #6366f1;\r\n      --accent-secondary: #8b5cf6;\r\n      --accent-success: #10b981;\r\n      --accent-warning: #f59e0b;\r\n      --accent-danger: #ef4444;\r\n      --text-primary: #f8fafc;\r\n      --text-secondary: #94a3b8;\r\n      --border: rgba(255, 255, 255, 0.1);\r\n    }\r\n\r\n    * { margin: 0; padding: 0; box-sizing: border-box; }\r\n\r\n    body {\r\n      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\r\n      background: var(--bg-primary);\r\n      color: var(--text-primary);\r\n      min-height: 100vh;\r\n      background-image: \r\n        radial-gradient(ellipse at 20% 20%, rgba(99, 102, 241, 0.1) 0%, transparent 50%),\r\n        radial-gradient(ellipse at 80% 80%, rgba(139, 92, 246, 0.1) 0%, transparent 50%);\r\n    }\r\n\r\n    .header {\r\n      background: var(--bg-secondary);\r\n      border-bottom: 1px solid var(--border);\r\n      padding: 1rem 2rem;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n    }\r\n\r\n    .header h1 {\r\n      font-size: 1.5rem;\r\n      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));\r\n      -webkit-background-clip: text;\r\n      -webkit-text-fill-color: transparent;\r\n    }\r\n\r\n    .header-actions {\r\n      display: flex;\r\n      gap: 1rem;\r\n      align-items: center;\r\n    }\r\n\r\n    .user-info {\r\n      color: var(--text-secondary);\r\n      font-size: 0.875rem;\r\n    }\r\n\r\n    .btn {\r\n      padding: 0.625rem 1.25rem;\r\n      border: none;\r\n      border-radius: 0.5rem;\r\n      font-size: 0.875rem;\r\n      font-weight: 500;\r\n      cursor: pointer;\r\n      transition: all 0.2s;\r\n      font-family: inherit;\r\n    }\r\n\r\n    .btn-primary {\r\n      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));\r\n      color: white;\r\n    }\r\n\r\n    .btn-primary:hover { transform: translateY(-1px); box-shadow: 0 5px 15px rgba(99, 102, 241, 0.3); }\r\n\r\n    .btn-secondary {\r\n      background: var(--bg-card);\r\n      color: var(--text-secondary);\r\n      border: 1px solid var(--border);\r\n    }\r\n\r\n    .btn-secondary:hover { background: var(--bg-secondary); color: var(--text-primary); }\r\n\r\n    .btn-success {\r\n      background: var(--accent-success);\r\n      color: white;\r\n    }\r\n\r\n    .btn-success:hover { background: #0d9668; }\r\n\r\n    .container {\r\n      max-width: 1400px;\r\n      margin: 0 auto;\r\n      padding: 2rem;\r\n      display: grid;\r\n      grid-template-columns: 1fr 1fr;\r\n      gap: 2rem;\r\n    }\r\n\r\n    @media (max-width: 1024px) {\r\n      .container { grid-template-columns: 1fr; }\r\n    }\r\n\r\n    .panel {\r\n      background: var(--bg-card);\r\n      border-radius: 1rem;\r\n      border: 1px solid var(--border);\r\n      overflow: hidden;\r\n    }\r\n\r\n    .panel-header {\r\n      background: var(--bg-secondary);\r\n      padding: 1rem 1.5rem;\r\n      border-bottom: 1px solid var(--border);\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n    }\r\n\r\n    .panel-header h2 {\r\n      font-size: 1.125rem;\r\n      font-weight: 600;\r\n    }\r\n\r\n    .panel-body {\r\n      padding: 1.5rem;\r\n    }\r\n\r\n    .form-row {\r\n      display: grid;\r\n      grid-template-columns: 1fr 1fr;\r\n      gap: 1rem;\r\n    }\r\n\r\n    .form-group {\r\n      margin-bottom: 1rem;\r\n    }\r\n\r\n    label {\r\n      display: block;\r\n      margin-bottom: 0.375rem;\r\n      font-size: 0.8125rem;\r\n      font-weight: 500;\r\n      color: var(--text-secondary);\r\n    }\r\n\r\n    input, select {\r\n      width: 100%;\r\n      padding: 0.75rem;\r\n      background: var(--bg-secondary);\r\n      border: 1px solid var(--border);\r\n      border-radius: 0.5rem;\r\n      color: var(--text-primary);\r\n      font-size: 0.9375rem;\r\n      font-family: inherit;\r\n    }\r\n\r\n    input:focus, select:focus {\r\n      outline: none;\r\n      border-color: var(--accent-primary);\r\n    }\r\n\r\n    .student-list {\r\n      max-height: 400px;\r\n      overflow-y: auto;\r\n    }\r\n\r\n    .student-item {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      padding: 0.875rem 1rem;\r\n      background: var(--bg-secondary);\r\n      border-radius: 0.5rem;\r\n      margin-bottom: 0.5rem;\r\n    }\r\n\r\n    .student-info h4 {\r\n      font-size: 0.9375rem;\r\n      font-weight: 500;\r\n    }\r\n\r\n    .student-info p {\r\n      font-size: 0.8125rem;\r\n      color: var(--text-secondary);\r\n    }\r\n\r\n    .queue-section {\r\n      margin-top: 1.5rem;\r\n      padding-top: 1.5rem;\r\n      border-top: 1px solid var(--border);\r\n    }\r\n\r\n    .enqueue-form {\r\n      display: flex;\r\n      gap: 0.75rem;\r\n      flex-wrap: wrap;\r\n    }\r\n\r\n    .enqueue-form select {\r\n      flex: 1;\r\n      min-width: 150px;\r\n    }\r\n\r\n    .success-toast {\r\n      position: fixed;\r\n      bottom: 2rem;\r\n      right: 2rem;\r\n      background: var(--accent-success);\r\n      color: white;\r\n      padding: 1rem 1.5rem;\r\n      border-radius: 0.75rem;\r\n      font-weight: 500;\r\n      box-shadow: 0 10px 25px rgba(16, 185, 129, 0.3);\r\n      display: none;\r\n      animation: slideIn 0.3s ease;\r\n    }\r\n\r\n    @keyframes slideIn {\r\n      from { transform: translateY(100%); opacity: 0; }\r\n      to { transform: translateY(0); opacity: 1; }\r\n    }\r\n\r\n    .queue-item {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      padding: 0.75rem 1rem;\r\n      background: var(--bg-secondary);\r\n      border-radius: 0.5rem;\r\n      margin-bottom: 0.5rem;\r\n      border-left: 3px solid var(--accent-primary);\r\n    }\r\n\r\n    .queue-item .position {\r\n      font-weight: 700;\r\n      color: var(--accent-primary);\r\n      margin-right: 1rem;\r\n    }\r\n\r\n    .queue-item .company {\r\n      color: var(--text-secondary);\r\n      font-size: 0.8125rem;\r\n    }\r\n  </style>\r\n</head>\r\n<body>\r\n  <header class=\"header\">\r\n    <h1>Secretary Panel</h1>\r\n    <div class=\"header-actions\">\r\n      <span class=\"user-info\" id=\"user-info\"></span>\r\n      <a href=\"/\" class=\"btn btn-secondary\">View Dashboard</a>\r\n      <button onclick=\"logout()\" class=\"btn btn-secondary\">Logout</button>\r\n    </div>\r\n  </header>\r\n\r\n  <div class=\"container\">\r\n    <!-- Register Student -->\r\n    <div class=\"panel\">\r\n      <div class=\"panel-header\">\r\n        <h2>\uD83D\uDCDD Register Student</h2>\r\n      </div>\r\n      <div class=\"panel-body\">\r\n        <form id=\"register-form\">\r\n          <div class=\"form-row\">\r\n            <div class=\"form-group\">\r\n              <label>First Name *</label>\r\n              <input type=\"text\" id=\"first_name\" required placeholder=\"John\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label>Last Name *</label>\r\n              <input type=\"text\" id=\"last_name\" required placeholder=\"Doe\">\r\n            </div>\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <div class=\"form-group\">\r\n              <label>Email</label>\r\n              <input type=\"email\" id=\"email\" placeholder=\"john@university.edu\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label>Phone</label>\r\n              <input type=\"tel\" id=\"phone\" placeholder=\"555-123-4567\">\r\n            </div>\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <div class=\"form-group\">\r\n              <label>Major</label>\r\n              <input type=\"text\" id=\"major\" placeholder=\"Computer Science\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label>Graduation Year</label>\r\n              <select id=\"graduation_year\">\r\n                <option value=\"\">Select Year</option>\r\n                <option value=\"2024\">2024</option>\r\n                <option value=\"2025\">2025</option>\r\n                <option value=\"2026\">2026</option>\r\n                <option value=\"2027\">2027</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <button type=\"submit\" class=\"btn btn-primary\" style=\"width: 100%\">Register Student</button>\r\n        </form>\r\n\r\n        <div class=\"queue-section\">\r\n          <h3 style=\"margin-bottom: 1rem; font-size: 1rem;\">Quick Queue</h3>\r\n          <form id=\"enqueue-form\" class=\"enqueue-form\">\r\n            <select id=\"enqueue-student\" required>\r\n              <option value=\"\">Select Student</option>\r\n            </select>\r\n            <select id=\"enqueue-company\" required>\r\n              <option value=\"\">Select Company</option>\r\n            </select>\r\n            <button type=\"submit\" class=\"btn btn-success\">Add to Queue</button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Students & Queue -->\r\n    <div class=\"panel\">\r\n      <div class=\"panel-header\">\r\n        <h2>\uD83D\uDC65 Registered Students</h2>\r\n        <button onclick=\"loadStudents()\" class=\"btn btn-secondary\">Refresh</button>\r\n      </div>\r\n      <div class=\"panel-body\">\r\n        <div class=\"student-list\" id=\"student-list\">\r\n          <p style=\"color: var(--text-secondary)\">Loading...</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div id=\"toast\" class=\"success-toast\"></div>\r\n\r\n  <script>\r\n    let students = [];\r\n    let companies = [];\r\n\r\n    async function checkAuth() {\r\n      // DEV MODE: Skip auth for testing\r\n      document.getElementById('user-info').textContent = 'DEV MODE (no auth)';\r\n      return;\r\n      /* Original auth check:\r\n      try {\r\n        const res = await fetch('/api/auth/me');\r\n        const data = await res.json();\r\n        if (!data.success || data.data.role !== 'SECRETARY') {\r\n          window.location.href = '/login';\r\n          return;\r\n        }\r\n        document.getElementById('user-info').textContent = 'Logged in as: ' + data.data.username;\r\n      } catch (e) {\r\n        window.location.href = '/login';\r\n      }\r\n      */\r\n    }\r\n\r\n    async function loadStudents() {\r\n      try {\r\n        const res = await fetch('/api/students');\r\n        const data = await res.json();\r\n        if (data.success) {\r\n          students = data.data;\r\n          renderStudents();\r\n          updateStudentDropdown();\r\n        }\r\n      } catch (e) {\r\n        console.error('Failed to load students:', e);\r\n      }\r\n    }\r\n\r\n    async function loadCompanies() {\r\n      try {\r\n        const res = await fetch('/api/interviewers');\r\n        const data = await res.json();\r\n        if (data.success) {\r\n          companies = data.data;\r\n          updateCompanyDropdown();\r\n        }\r\n      } catch (e) {\r\n        console.error('Failed to load companies:', e);\r\n      }\r\n    }\r\n\r\n    function renderStudents() {\r\n      const list = document.getElementById('student-list');\r\n      if (students.length === 0) {\r\n        list.innerHTML = '<p style=\"color: var(--text-secondary)\">No students registered yet</p>';\r\n        return;\r\n      }\r\n      list.innerHTML = students.map(s => \\`\r\n        <div class=\"student-item\">\r\n          <div class=\"student-info\">\r\n            <h4>\\${s.first_name} \\${s.last_name}</h4>\r\n            <p>\\${s.major || 'No major'} \u2022 \\${s.graduation_year || 'N/A'}</p>\r\n          </div>\r\n          <span style=\"color: var(--text-secondary); font-size: 0.75rem\">#\\${s.id}</span>\r\n        </div>\r\n      \\`).join('');\r\n    }\r\n\r\n    function updateStudentDropdown() {\r\n      const select = document.getElementById('enqueue-student');\r\n      select.innerHTML = '<option value=\"\">Select Student</option>' + \r\n        students.map(s => \\`<option value=\"\\${s.id}\">\\${s.first_name} \\${s.last_name}</option>\\`).join('');\r\n    }\r\n\r\n    function updateCompanyDropdown() {\r\n      const select = document.getElementById('enqueue-company');\r\n      select.innerHTML = '<option value=\"\">Select Company</option>' + \r\n        companies.map(c => \\`<option value=\"\\${c.id}\">\\${c.name}</option>\\`).join('');\r\n    }\r\n\r\n    function showToast(msg) {\r\n      const toast = document.getElementById('toast');\r\n      toast.textContent = msg;\r\n      toast.style.display = 'block';\r\n      setTimeout(() => { toast.style.display = 'none'; }, 3000);\r\n    }\r\n\r\n    document.getElementById('register-form').addEventListener('submit', async (e) => {\r\n      e.preventDefault();\r\n      const formData = {\r\n        first_name: document.getElementById('first_name').value,\r\n        last_name: document.getElementById('last_name').value,\r\n        email: document.getElementById('email').value || undefined,\r\n        phone: document.getElementById('phone').value || undefined,\r\n        major: document.getElementById('major').value || undefined,\r\n        graduation_year: document.getElementById('graduation_year').value || undefined\r\n      };\r\n\r\n      try {\r\n        const res = await fetch('/api/students', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(formData)\r\n        });\r\n        const data = await res.json();\r\n        if (data.success) {\r\n          showToast('\u2705 Student registered!');\r\n          e.target.reset();\r\n          loadStudents();\r\n        } else {\r\n          alert(data.error || 'Failed to register');\r\n        }\r\n      } catch (e) {\r\n        alert('Connection error');\r\n      }\r\n    });\r\n\r\n    document.getElementById('enqueue-form').addEventListener('submit', async (e) => {\r\n      e.preventDefault();\r\n      const interviewee_id = parseInt(document.getElementById('enqueue-student').value);\r\n      const interviewer_id = parseInt(document.getElementById('enqueue-company').value);\r\n\r\n      try {\r\n        const res = await fetch('/api/queue', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ interviewee_id, interviewer_id })\r\n        });\r\n        const data = await res.json();\r\n        if (data.success) {\r\n          showToast('\u2705 Added to queue (Position #' + data.data.queue_position + ')');\r\n          e.target.reset();\r\n        } else {\r\n          alert(data.error || 'Failed to enqueue');\r\n        }\r\n      } catch (e) {\r\n        alert('Connection error');\r\n      }\r\n    });\r\n\r\n    async function logout() {\r\n      await fetch('/api/auth/logout', { method: 'POST' });\r\n      window.location.href = '/login';\r\n    }\r\n\r\n    // Initialize\r\n    checkAuth();\r\n    loadStudents();\r\n    loadCompanies();\r\n  </script>\r\n</body>\r\n</html>`;\r\n}\r\n", "// Company Operator Page - Call students and manage interviews\r\nexport function getCompanyPageHtml(): string {\r\n  return `<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n  <meta charset=\"UTF-8\">\r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n  <title>Company Panel - Career Fair</title>\r\n  <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\r\n  <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\r\n  <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap\" rel=\"stylesheet\">\r\n  <style>\r\n    :root {\r\n      --bg-primary: #0f0f23;\r\n      --bg-secondary: #1a1a2e;\r\n      --bg-card: #16213e;\r\n      --accent-primary: #6366f1;\r\n      --accent-secondary: #8b5cf6;\r\n      --accent-success: #10b981;\r\n      --accent-warning: #f59e0b;\r\n      --accent-danger: #ef4444;\r\n      --text-primary: #f8fafc;\r\n      --text-secondary: #94a3b8;\r\n      --border: rgba(255, 255, 255, 0.1);\r\n    }\r\n\r\n    * { margin: 0; padding: 0; box-sizing: border-box; }\r\n\r\n    body {\r\n      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\r\n      background: var(--bg-primary);\r\n      color: var(--text-primary);\r\n      min-height: 100vh;\r\n      background-image: \r\n        radial-gradient(ellipse at 20% 20%, rgba(99, 102, 241, 0.1) 0%, transparent 50%),\r\n        radial-gradient(ellipse at 80% 80%, rgba(139, 92, 246, 0.1) 0%, transparent 50%);\r\n    }\r\n\r\n    .header {\r\n      background: var(--bg-secondary);\r\n      border-bottom: 1px solid var(--border);\r\n      padding: 1rem 2rem;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n    }\r\n\r\n    .header h1 {\r\n      font-size: 1.5rem;\r\n      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));\r\n      -webkit-background-clip: text;\r\n      -webkit-text-fill-color: transparent;\r\n    }\r\n\r\n    .header-actions {\r\n      display: flex;\r\n      gap: 1rem;\r\n      align-items: center;\r\n    }\r\n\r\n    .user-info {\r\n      color: var(--text-secondary);\r\n      font-size: 0.875rem;\r\n    }\r\n\r\n    .btn {\r\n      padding: 0.75rem 1.5rem;\r\n      border: none;\r\n      border-radius: 0.75rem;\r\n      font-size: 1rem;\r\n      font-weight: 600;\r\n      cursor: pointer;\r\n      transition: all 0.2s;\r\n      font-family: inherit;\r\n    }\r\n\r\n    .btn-primary {\r\n      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));\r\n      color: white;\r\n    }\r\n\r\n    .btn-primary:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(99, 102, 241, 0.4); }\r\n\r\n    .btn-secondary {\r\n      background: var(--bg-card);\r\n      color: var(--text-secondary);\r\n      border: 1px solid var(--border);\r\n      padding: 0.625rem 1.25rem;\r\n      font-size: 0.875rem;\r\n    }\r\n\r\n    .btn-secondary:hover { background: var(--bg-secondary); color: var(--text-primary); }\r\n\r\n    .btn-success {\r\n      background: linear-gradient(135deg, var(--accent-success), #059669);\r\n      color: white;\r\n    }\r\n\r\n    .btn-success:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(16, 185, 129, 0.4); }\r\n\r\n    .btn-warning {\r\n      background: linear-gradient(135deg, var(--accent-warning), #d97706);\r\n      color: white;\r\n    }\r\n\r\n    .btn-warning:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(245, 158, 11, 0.4); }\r\n\r\n    .btn-danger {\r\n      background: var(--accent-danger);\r\n      color: white;\r\n    }\r\n\r\n    .btn:disabled {\r\n      opacity: 0.5;\r\n      cursor: not-allowed;\r\n      transform: none !important;\r\n    }\r\n\r\n    .container {\r\n      max-width: 800px;\r\n      margin: 0 auto;\r\n      padding: 3rem 2rem;\r\n    }\r\n\r\n    .status-card {\r\n      background: var(--bg-card);\r\n      border-radius: 1.5rem;\r\n      border: 1px solid var(--border);\r\n      padding: 3rem;\r\n      text-align: center;\r\n      margin-bottom: 2rem;\r\n    }\r\n\r\n    .status-badge {\r\n      display: inline-block;\r\n      padding: 0.5rem 1.25rem;\r\n      border-radius: 2rem;\r\n      font-size: 0.875rem;\r\n      font-weight: 600;\r\n      text-transform: uppercase;\r\n      letter-spacing: 0.1em;\r\n      margin-bottom: 1.5rem;\r\n    }\r\n\r\n    .status-idle { background: rgba(148, 163, 184, 0.15); color: var(--text-secondary); }\r\n    .status-calling { background: rgba(245, 158, 11, 0.15); color: var(--accent-warning); }\r\n    .status-interviewing { background: rgba(16, 185, 129, 0.15); color: var(--accent-success); }\r\n\r\n    .current-student {\r\n      font-size: 3rem;\r\n      font-weight: 700;\r\n      margin: 1rem 0;\r\n      background: linear-gradient(135deg, var(--text-primary), var(--text-secondary));\r\n      -webkit-background-clip: text;\r\n      -webkit-text-fill-color: transparent;\r\n    }\r\n\r\n    .action-buttons {\r\n      display: flex;\r\n      gap: 1rem;\r\n      justify-content: center;\r\n      flex-wrap: wrap;\r\n      margin-top: 2rem;\r\n    }\r\n\r\n    .action-buttons .btn {\r\n      min-width: 150px;\r\n      padding: 1rem 2rem;\r\n      font-size: 1.125rem;\r\n    }\r\n\r\n    .queue-panel {\r\n      background: var(--bg-card);\r\n      border-radius: 1rem;\r\n      border: 1px solid var(--border);\r\n      overflow: hidden;\r\n    }\r\n\r\n    .queue-header {\r\n      background: var(--bg-secondary);\r\n      padding: 1rem 1.5rem;\r\n      border-bottom: 1px solid var(--border);\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n    }\r\n\r\n    .queue-header h2 {\r\n      font-size: 1.125rem;\r\n      font-weight: 600;\r\n    }\r\n\r\n    .queue-count {\r\n      background: var(--accent-primary);\r\n      color: white;\r\n      padding: 0.25rem 0.75rem;\r\n      border-radius: 1rem;\r\n      font-size: 0.875rem;\r\n      font-weight: 600;\r\n    }\r\n\r\n    .queue-list {\r\n      padding: 1rem;\r\n    }\r\n\r\n    .queue-item {\r\n      display: flex;\r\n      align-items: center;\r\n      padding: 1rem;\r\n      background: var(--bg-secondary);\r\n      border-radius: 0.75rem;\r\n      margin-bottom: 0.5rem;\r\n    }\r\n\r\n    .queue-position {\r\n      width: 40px;\r\n      height: 40px;\r\n      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));\r\n      color: white;\r\n      border-radius: 50%;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      font-weight: 700;\r\n      margin-right: 1rem;\r\n    }\r\n\r\n    .queue-student-info h4 {\r\n      font-weight: 500;\r\n    }\r\n\r\n    .queue-student-info p {\r\n      font-size: 0.8125rem;\r\n      color: var(--text-secondary);\r\n    }\r\n\r\n    .empty-queue {\r\n      text-align: center;\r\n      padding: 2rem;\r\n      color: var(--text-secondary);\r\n    }\r\n\r\n    .calling-animation {\r\n      animation: pulseGlow 1.5s ease-in-out infinite;\r\n    }\r\n\r\n    @keyframes pulseGlow {\r\n      0%, 100% { box-shadow: 0 0 30px rgba(245, 158, 11, 0.3); }\r\n      50% { box-shadow: 0 0 60px rgba(245, 158, 11, 0.5); }\r\n    }\r\n\r\n    .interviewing-glow {\r\n      box-shadow: 0 0 40px rgba(16, 185, 129, 0.3);\r\n    }\r\n  </style>\r\n</head>\r\n<body>\r\n  <header class=\"header\">\r\n    <h1>Company Panel</h1>\r\n    <div class=\"header-actions\">\r\n      <span class=\"user-info\" id=\"user-info\"></span>\r\n      <a href=\"/\" class=\"btn btn-secondary\">View Dashboard</a>\r\n      <button onclick=\"logout()\" class=\"btn btn-secondary\">Logout</button>\r\n    </div>\r\n  </header>\r\n\r\n  <div class=\"container\">\r\n    <div class=\"status-card\" id=\"status-card\">\r\n      <span class=\"status-badge status-idle\" id=\"status-badge\">Ready</span>\r\n      <div class=\"current-student\" id=\"current-student\">No Active Interview</div>\r\n      <p style=\"color: var(--text-secondary)\" id=\"status-message\">Call the next student in your queue</p>\r\n      <div class=\"action-buttons\" id=\"action-buttons\">\r\n        <button class=\"btn btn-primary\" id=\"btn-call-next\" onclick=\"callNext()\">\r\n          \uD83D\uDCE2 Call Next\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"queue-panel\">\r\n      <div class=\"queue-header\">\r\n        <h2>\uD83D\uDCCB Your Queue</h2>\r\n        <span class=\"queue-count\" id=\"queue-count\">0</span>\r\n      </div>\r\n      <div class=\"queue-list\" id=\"queue-list\">\r\n        <div class=\"empty-queue\">Loading...</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <script>\r\n    let currentStatus = 'IDLE';\r\n    let currentInterview = null;\r\n    let interviewerId = null;\r\n\r\n    async function checkAuth() {\r\n      // DEV MODE: Skip auth, use company ID 1 for testing\r\n      document.getElementById('user-info').textContent = 'DEV MODE (TechCorp)';\r\n      interviewerId = 1; // Default to first company\r\n      loadQueue();\r\n      return;\r\n      /* Original auth check:\r\n      try {\r\n        const res = await fetch('/api/auth/me');\r\n        const data = await res.json();\r\n        if (!data.success || data.data.role !== 'COMPANY') {\r\n          window.location.href = '/login';\r\n          return;\r\n        }\r\n        document.getElementById('user-info').textContent = 'Logged in as: ' + data.data.username;\r\n        interviewerId = data.data.interviewer_id;\r\n        loadQueue();\r\n      } catch (e) {\r\n        window.location.href = '/login';\r\n      }\r\n      */\r\n    }\r\n\r\n    async function loadQueue() {\r\n      try {\r\n        const res = await fetch('/api/queue?interviewer_id=' + interviewerId);\r\n        const data = await res.json();\r\n        if (data.success) {\r\n          renderQueue(data.data);\r\n          detectCurrentStatus(data.data);\r\n        }\r\n      } catch (e) {\r\n        console.error('Failed to load queue:', e);\r\n      }\r\n    }\r\n\r\n    function detectCurrentStatus(queue) {\r\n      const calling = queue.find(i => i.status === 'CALLING');\r\n      const happening = queue.find(i => i.status === 'HAPPENING');\r\n\r\n      if (calling) {\r\n        setStatus('CALLING', calling.first_name + ' ' + calling.last_name, calling);\r\n      } else if (happening) {\r\n        setStatus('HAPPENING', happening.first_name + ' ' + happening.last_name, happening);\r\n      } else {\r\n        setStatus('IDLE', null, null);\r\n      }\r\n    }\r\n\r\n    function setStatus(status, studentName, interview) {\r\n      currentStatus = status;\r\n      currentInterview = interview;\r\n\r\n      const card = document.getElementById('status-card');\r\n      const badge = document.getElementById('status-badge');\r\n      const studentEl = document.getElementById('current-student');\r\n      const messageEl = document.getElementById('status-message');\r\n      const actions = document.getElementById('action-buttons');\r\n\r\n      card.className = 'status-card';\r\n\r\n      if (status === 'IDLE') {\r\n        badge.className = 'status-badge status-idle';\r\n        badge.textContent = 'Ready';\r\n        studentEl.textContent = 'No Active Interview';\r\n        messageEl.textContent = 'Call the next student in your queue';\r\n        actions.innerHTML = '<button class=\"btn btn-primary\" onclick=\"callNext()\">\uD83D\uDCE2 Call Next</button>';\r\n      } else if (status === 'CALLING') {\r\n        card.classList.add('calling-animation');\r\n        badge.className = 'status-badge status-calling';\r\n        badge.textContent = 'Now Calling';\r\n        studentEl.textContent = studentName;\r\n        messageEl.textContent = 'Please wait for the student to arrive';\r\n        actions.innerHTML = \\`\r\n          <button class=\"btn btn-success\" onclick=\"startInterview()\">\u2713 Student Arrived</button>\r\n          <button class=\"btn btn-danger\" onclick=\"markNoShow()\">\u2717 No Show</button>\r\n        \\`;\r\n      } else if (status === 'HAPPENING') {\r\n        card.classList.add('interviewing-glow');\r\n        badge.className = 'status-badge status-interviewing';\r\n        badge.textContent = 'Interviewing';\r\n        studentEl.textContent = studentName;\r\n        messageEl.textContent = 'Interview in progress';\r\n        actions.innerHTML = '<button class=\"btn btn-success\" onclick=\"completeInterview()\">\u2713 Complete Interview</button>';\r\n      }\r\n    }\r\n\r\n    function renderQueue(queue) {\r\n      const list = document.getElementById('queue-list');\r\n      const countEl = document.getElementById('queue-count');\r\n      \r\n      const enqueued = queue.filter(i => i.status === 'ENQUEUED');\r\n      countEl.textContent = enqueued.length;\r\n\r\n      if (enqueued.length === 0) {\r\n        list.innerHTML = '<div class=\"empty-queue\">No students in queue</div>';\r\n        return;\r\n      }\r\n\r\n      list.innerHTML = enqueued.map((item, idx) => \\`\r\n        <div class=\"queue-item\">\r\n          <div class=\"queue-position\">\\${idx + 1}</div>\r\n          <div class=\"queue-student-info\">\r\n            <h4>\\${item.first_name} \\${item.last_name}</h4>\r\n            <p>\\${item.major || 'No major specified'}</p>\r\n          </div>\r\n        </div>\r\n      \\`).join('');\r\n    }\r\n\r\n    async function callNext() {\r\n      try {\r\n        const res = await fetch('/api/call-next', { method: 'POST' });\r\n        const data = await res.json();\r\n        if (data.success) {\r\n          loadQueue();\r\n        } else {\r\n          alert(data.error || 'Failed to call next');\r\n        }\r\n      } catch (e) {\r\n        alert('Connection error');\r\n      }\r\n    }\r\n\r\n    async function startInterview() {\r\n      try {\r\n        const res = await fetch('/api/start-interview', { method: 'POST' });\r\n        const data = await res.json();\r\n        if (data.success) {\r\n          loadQueue();\r\n        } else {\r\n          alert(data.error || 'Failed to start interview');\r\n        }\r\n      } catch (e) {\r\n        alert('Connection error');\r\n      }\r\n    }\r\n\r\n    async function completeInterview() {\r\n      try {\r\n        const res = await fetch('/api/complete-interview', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({})\r\n        });\r\n        const data = await res.json();\r\n        if (data.success) {\r\n          loadQueue();\r\n        } else {\r\n          alert(data.error || 'Failed to complete interview');\r\n        }\r\n      } catch (e) {\r\n        alert('Connection error');\r\n      }\r\n    }\r\n\r\n    async function markNoShow() {\r\n      if (!confirm('Mark this student as no-show?')) return;\r\n      \r\n      try {\r\n        const res = await fetch('/api/no-show', { method: 'POST' });\r\n        const data = await res.json();\r\n        if (data.success) {\r\n          loadQueue();\r\n        } else {\r\n          alert(data.error || 'Failed to mark no-show');\r\n        }\r\n      } catch (e) {\r\n        alert('Connection error');\r\n      }\r\n    }\r\n\r\n    async function logout() {\r\n      await fetch('/api/auth/logout', { method: 'POST' });\r\n      window.location.href = '/login';\r\n    }\r\n\r\n    // Initialize\r\n    checkAuth();\r\n    \r\n    // Auto-refresh queue every 5 seconds\r\n    setInterval(loadQueue, 5000);\r\n  </script>\r\n</body>\r\n</html>`;\r\n}\r\n", "// Gatekeeper panel page - manages all companies' interview flows\r\nexport function getGatekeeperPageHtml(): string {\r\n    return `<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Gatekeeper Panel - CDIQ</title>\r\n    <style>\r\n        * { margin: 0; padding: 0; box-sizing: border-box; }\r\n        \r\n        body {\r\n            font-family: 'Segoe UI', system-ui, sans-serif;\r\n            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);\r\n            min-height: 100vh;\r\n            color: #f0f0f0;\r\n        }\r\n\r\n        .header {\r\n            background: rgba(255,255,255,0.05);\r\n            backdrop-filter: blur(10px);\r\n            padding: 1rem 2rem;\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            border-bottom: 1px solid rgba(255,255,255,0.1);\r\n        }\r\n\r\n        .header h1 {\r\n            font-size: 1.5rem;\r\n            background: linear-gradient(135deg, #e94560, #ff6b6b);\r\n            -webkit-background-clip: text;\r\n            -webkit-text-fill-color: transparent;\r\n        }\r\n\r\n        .user-info {\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 1rem;\r\n        }\r\n\r\n        .logout-btn {\r\n            padding: 0.5rem 1rem;\r\n            background: rgba(255,255,255,0.1);\r\n            border: 1px solid rgba(255,255,255,0.2);\r\n            border-radius: 8px;\r\n            color: white;\r\n            cursor: pointer;\r\n            transition: all 0.3s;\r\n        }\r\n\r\n        .logout-btn:hover {\r\n            background: rgba(233, 69, 96, 0.3);\r\n        }\r\n\r\n        .main {\r\n            padding: 2rem;\r\n            max-width: 1400px;\r\n            margin: 0 auto;\r\n        }\r\n\r\n        .companies-grid {\r\n            display: grid;\r\n            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));\r\n            gap: 1.5rem;\r\n        }\r\n\r\n        .company-card {\r\n            background: rgba(255,255,255,0.08);\r\n            backdrop-filter: blur(10px);\r\n            border-radius: 16px;\r\n            padding: 1.5rem;\r\n            border: 1px solid rgba(255,255,255,0.1);\r\n            transition: all 0.3s;\r\n        }\r\n\r\n        .company-card.paused {\r\n            opacity: 0.6;\r\n            border-color: rgba(255, 193, 7, 0.5);\r\n        }\r\n\r\n        .company-card.calling {\r\n            border-color: #e94560;\r\n            box-shadow: 0 0 20px rgba(233, 69, 96, 0.3);\r\n            animation: pulse 2s infinite;\r\n        }\r\n\r\n        .company-card.interviewing {\r\n            border-color: #4CAF50;\r\n            box-shadow: 0 0 15px rgba(76, 175, 80, 0.3);\r\n        }\r\n\r\n        @keyframes pulse {\r\n            0%, 100% { box-shadow: 0 0 20px rgba(233, 69, 96, 0.3); }\r\n            50% { box-shadow: 0 0 30px rgba(233, 69, 96, 0.5); }\r\n        }\r\n\r\n        .company-header {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: flex-start;\r\n            margin-bottom: 1rem;\r\n        }\r\n\r\n        .company-name {\r\n            font-size: 1.2rem;\r\n            font-weight: 600;\r\n        }\r\n\r\n        .company-table {\r\n            font-size: 0.85rem;\r\n            color: #888;\r\n        }\r\n\r\n        .status-badge {\r\n            padding: 0.25rem 0.75rem;\r\n            border-radius: 20px;\r\n            font-size: 0.75rem;\r\n            font-weight: 600;\r\n            text-transform: uppercase;\r\n        }\r\n\r\n        .status-idle { background: rgba(100, 100, 100, 0.5); }\r\n        .status-calling { background: rgba(233, 69, 96, 0.5); color: #fff; }\r\n        .status-interviewing { background: rgba(76, 175, 80, 0.5); color: #fff; }\r\n        .status-paused { background: rgba(255, 193, 7, 0.5); color: #000; }\r\n\r\n        .current-student {\r\n            background: rgba(255,255,255,0.05);\r\n            padding: 1rem;\r\n            border-radius: 8px;\r\n            margin: 1rem 0;\r\n            text-align: center;\r\n        }\r\n\r\n        .current-student .name {\r\n            font-size: 1.3rem;\r\n            font-weight: 600;\r\n        }\r\n\r\n        .current-student .status {\r\n            font-size: 0.85rem;\r\n            color: #888;\r\n            margin-top: 0.25rem;\r\n        }\r\n\r\n        .queue-list {\r\n            margin: 1rem 0;\r\n            max-height: 150px;\r\n            overflow-y: auto;\r\n        }\r\n\r\n        .queue-item {\r\n            padding: 0.5rem;\r\n            background: rgba(255,255,255,0.03);\r\n            border-radius: 4px;\r\n            margin-bottom: 0.25rem;\r\n            font-size: 0.9rem;\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n        }\r\n\r\n        .queue-item.paused {\r\n            opacity: 0.5;\r\n            text-decoration: line-through;\r\n        }\r\n\r\n        .actions {\r\n            display: grid;\r\n            grid-template-columns: repeat(2, 1fr);\r\n            gap: 0.5rem;\r\n            margin-top: 1rem;\r\n        }\r\n\r\n        .btn {\r\n            padding: 0.75rem;\r\n            border: none;\r\n            border-radius: 8px;\r\n            cursor: pointer;\r\n            font-weight: 600;\r\n            transition: all 0.3s;\r\n            font-size: 0.85rem;\r\n        }\r\n\r\n        .btn:disabled {\r\n            opacity: 0.5;\r\n            cursor: not-allowed;\r\n        }\r\n\r\n        .btn-call { background: linear-gradient(135deg, #e94560, #ff6b6b); color: white; }\r\n        .btn-start { background: linear-gradient(135deg, #4CAF50, #45a049); color: white; }\r\n        .btn-complete { background: linear-gradient(135deg, #2196F3, #1976D2); color: white; }\r\n        .btn-noshow { background: linear-gradient(135deg, #ff9800, #f57c00); color: white; }\r\n        .btn-pause { background: rgba(255, 193, 7, 0.3); color: #ffc107; border: 1px solid #ffc107; }\r\n\r\n        .btn:hover:not(:disabled) { transform: translateY(-2px); }\r\n\r\n        .loading {\r\n            text-align: center;\r\n            padding: 3rem;\r\n            color: #888;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <header class=\"header\">\r\n        <h1>\uD83D\uDEAA Gatekeeper Panel</h1>\r\n        <div class=\"user-info\">\r\n            <span id=\"userDisplay\">Loading...</span>\r\n            <button class=\"logout-btn\" onclick=\"logout()\">Logout</button>\r\n        </div>\r\n    </header>\r\n\r\n    <main class=\"main\">\r\n        <div id=\"companiesContainer\" class=\"companies-grid\">\r\n            <div class=\"loading\">Loading companies...</div>\r\n        </div>\r\n    </main>\r\n\r\n    <script>\r\n        let companiesData = [];\r\n        let queueData = [];\r\n\r\n        async function checkAuth() {\r\n            // DEV MODE: Skip auth for testing\r\n            document.getElementById('userDisplay').textContent = 'DEV MODE (no auth)';\r\n            return;\r\n            /* Original auth check:\r\n            try {\r\n                const res = await fetch('/api/auth/me');\r\n                const data = await res.json();\r\n                if (!data.success || data.data.role !== 'GATEKEEPER') {\r\n                    window.location.href = '/login';\r\n                    return;\r\n                }\r\n                document.getElementById('userDisplay').textContent = 'Gatekeeper: ' + data.data.username;\r\n            } catch {\r\n                window.location.href = '/login';\r\n            }\r\n            */\r\n        }\r\n\r\n        async function fetchData() {\r\n            try {\r\n                const [dashRes, queueRes] = await Promise.all([\r\n                    fetch('/api/dashboard'),\r\n                    fetch('/api/gatekeeper/queue')\r\n                ]);\r\n                \r\n                const dashData = await dashRes.json();\r\n                const qData = await queueRes.json();\r\n                \r\n                if (dashData.success) companiesData = dashData.data.interviewers;\r\n                if (qData.success) queueData = qData.data;\r\n                \r\n                renderCompanies();\r\n            } catch (e) {\r\n                console.error('Failed to fetch data:', e);\r\n            }\r\n        }\r\n\r\n        function getQueueForCompany(companyId) {\r\n            return queueData.filter(q => q.interviewer_id === companyId);\r\n        }\r\n\r\n        function getCurrentInterview(companyId) {\r\n            return queueData.find(q => \r\n                q.interviewer_id === companyId && \r\n                (q.status === 'CALLING' || q.status === 'HAPPENING')\r\n            );\r\n        }\r\n\r\n        function renderCompanies() {\r\n            const container = document.getElementById('companiesContainer');\r\n            \r\n            if (!companiesData.length) {\r\n                container.innerHTML = '<div class=\"loading\">No companies found</div>';\r\n                return;\r\n            }\r\n\r\n            container.innerHTML = companiesData.map(company => {\r\n                const queue = getQueueForCompany(company.id).filter(q => q.status === 'ENQUEUED');\r\n                const current = getCurrentInterview(company.id);\r\n                const statusClass = company.is_paused ? 'paused' : \r\n                    company.status === 'CALLING' ? 'calling' : \r\n                    company.status === 'INTERVIEWING' ? 'interviewing' : '';\r\n\r\n                return \\`\r\n                    <div class=\"company-card \\${statusClass}\">\r\n                        <div class=\"company-header\">\r\n                            <div>\r\n                                <div class=\"company-name\">\\${company.name}</div>\r\n                                <div class=\"company-table\">Table: \\${company.table_number || 'N/A'}</div>\r\n                            </div>\r\n                            <span class=\"status-badge status-\\${company.status.toLowerCase()}\">\\${company.status}</span>\r\n                        </div>\r\n\r\n                        \\${current ? \\`\r\n                            <div class=\"current-student\">\r\n                                <div class=\"name\">\\${current.first_name} \\${current.last_name}</div>\r\n                                <div class=\"status\">\\${current.status} \\${current.major ? '\u2022 ' + current.major : ''}</div>\r\n                            </div>\r\n                        \\` : \\`\r\n                            <div class=\"current-student\">\r\n                                <div class=\"name\" style=\"color: #888\">No active interview</div>\r\n                            </div>\r\n                        \\`}\r\n\r\n                        <div class=\"queue-list\">\r\n                            \\${queue.length ? queue.map((q, i) => \\`\r\n                                <div class=\"queue-item \\${q.student_paused ? 'paused' : ''}\">\r\n                                    <span>\\${i + 1}. \\${q.first_name} \\${q.last_name}</span>\r\n                                    <span style=\"color: #888\">\\${q.major || ''}</span>\r\n                                </div>\r\n                            \\`).join('') : '<div style=\"color: #666; text-align: center; padding: 0.5rem\">Queue empty</div>'}\r\n                        </div>\r\n\r\n                        <div class=\"actions\">\r\n                            <button class=\"btn btn-call\" \r\n                                onclick=\"callNext(\\${company.id})\" \r\n                                \\${company.is_paused || current || !queue.length ? 'disabled' : ''}>\r\n                                \uD83D\uDCE2 Call Next\r\n                            </button>\r\n                            <button class=\"btn btn-start\" \r\n                                onclick=\"startInterview(\\${current?.id})\"\r\n                                \\${!current || current.status !== 'CALLING' ? 'disabled' : ''}>\r\n                                \u2713 Arrived\r\n                            </button>\r\n                            <button class=\"btn btn-complete\" \r\n                                onclick=\"completeInterview(\\${current?.id})\"\r\n                                \\${!current || current.status !== 'HAPPENING' ? 'disabled' : ''}>\r\n                                \u2713 Complete\r\n                            </button>\r\n                            <button class=\"btn btn-noshow\" \r\n                                onclick=\"noShow(\\${current?.id})\"\r\n                                \\${!current ? 'disabled' : ''}>\r\n                                \u2717 No Show\r\n                            </button>\r\n                            <button class=\"btn btn-pause\" \r\n                                onclick=\"togglePause(\\${company.id})\"\r\n                                style=\"grid-column: span 2\">\r\n                                \\${company.is_paused ? '\u25B6 Unpause' : '\u23F8 Pause'} Company\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                \\`;\r\n            }).join('');\r\n        }\r\n\r\n        async function callNext(companyId) {\r\n            try {\r\n                const res = await fetch('/api/gatekeeper/call-next', {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({ interviewer_id: companyId })\r\n                });\r\n                const data = await res.json();\r\n                if (!data.success) alert(data.error);\r\n                fetchData();\r\n            } catch (e) { alert('Failed: ' + e.message); }\r\n        }\r\n\r\n        async function startInterview(interviewId) {\r\n            if (!interviewId) return;\r\n            try {\r\n                const res = await fetch('/api/gatekeeper/action', {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({ interview_id: interviewId, action: 'start' })\r\n                });\r\n                fetchData();\r\n            } catch (e) { alert('Failed: ' + e.message); }\r\n        }\r\n\r\n        async function completeInterview(interviewId) {\r\n            if (!interviewId) return;\r\n            try {\r\n                const res = await fetch('/api/gatekeeper/action', {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({ interview_id: interviewId, action: 'complete' })\r\n                });\r\n                fetchData();\r\n            } catch (e) { alert('Failed: ' + e.message); }\r\n        }\r\n\r\n        async function noShow(interviewId) {\r\n            if (!interviewId) return;\r\n            if (!confirm('Mark this student as no-show?')) return;\r\n            try {\r\n                const res = await fetch('/api/gatekeeper/action', {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({ interview_id: interviewId, action: 'no_show' })\r\n                });\r\n                fetchData();\r\n            } catch (e) { alert('Failed: ' + e.message); }\r\n        }\r\n\r\n        async function togglePause(companyId) {\r\n            try {\r\n                const res = await fetch('/api/interviewers/toggle-pause?id=' + companyId, {\r\n                    method: 'POST'\r\n                });\r\n                fetchData();\r\n            } catch (e) { alert('Failed: ' + e.message); }\r\n        }\r\n\r\n        async function logout() {\r\n            await fetch('/api/auth/logout', { method: 'POST' });\r\n            window.location.href = '/login';\r\n        }\r\n\r\n        // Initialize\r\n        checkAuth();\r\n        fetchData();\r\n        setInterval(fetchData, 2000);\r\n    </script>\r\n</body>\r\n</html>`;\r\n}\r\n", "// Main Cloudflare Worker entry point\r\nimport type { Env } from './types';\r\nimport {\r\n    handleLogin,\r\n    handleLogout,\r\n    handleGetMe,\r\n    handleRegisterStudent,\r\n    handleEnqueueStudent,\r\n    handleGetStudents,\r\n    handleGetInterviewers,\r\n    handleGetQueue,\r\n    handleCallNext,\r\n    handleStartInterview,\r\n    handleCompleteInterview,\r\n    handleNoShow,\r\n    handleDashboard,\r\n    handleCreateInterviewer,\r\n    handleUpdateInterviewer,\r\n    handleDeleteInterviewer,\r\n    handleDeleteStudent,\r\n    handleToggleStudentPause,\r\n    handleToggleInterviewerPause,\r\n    handleGatekeeperCallNext,\r\n    handleGatekeeperAction,\r\n    handleGatekeeperQueue\r\n} from './api';\r\n\r\n// Static HTML imports\r\nimport { getPublicDashboardHtml } from './pages/dashboard';\r\nimport { getLoginPageHtml } from './pages/login';\r\nimport { getSecretaryPageHtml } from './pages/secretary';\r\nimport { getCompanyPageHtml } from './pages/company';\r\nimport { getGatekeeperPageHtml } from './pages/gatekeeper';\r\n\r\nexport default {\r\n    async fetch(request: Request, env: Env): Promise<Response> {\r\n        const url = new URL(request.url);\r\n        const path = url.pathname;\r\n        const method = request.method;\r\n\r\n        // CORS headers for API\r\n        const corsHeaders = {\r\n            'Access-Control-Allow-Origin': '*',\r\n            'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\r\n            'Access-Control-Allow-Headers': 'Content-Type, Authorization'\r\n        };\r\n\r\n        // Handle preflight\r\n        if (method === 'OPTIONS') {\r\n            return new Response(null, { headers: corsHeaders });\r\n        }\r\n\r\n        try {\r\n            // ============ API ROUTES ============\r\n            if (path.startsWith('/api/')) {\r\n                let response: Response;\r\n\r\n                // Auth routes\r\n                if (path === '/api/auth/login' && method === 'POST') {\r\n                    response = await handleLogin(request, env);\r\n                } else if (path === '/api/auth/logout' && method === 'POST') {\r\n                    response = await handleLogout(request, env);\r\n                } else if (path === '/api/auth/me' && method === 'GET') {\r\n                    response = await handleGetMe(request, env);\r\n                }\r\n                // Secretary routes\r\n                else if (path === '/api/students' && method === 'POST') {\r\n                    response = await handleRegisterStudent(request, env);\r\n                } else if (path === '/api/students' && method === 'GET') {\r\n                    response = await handleGetStudents(request, env);\r\n                } else if (path === '/api/queue' && method === 'POST') {\r\n                    response = await handleEnqueueStudent(request, env);\r\n                } else if (path === '/api/queue' && method === 'GET') {\r\n                    response = await handleGetQueue(request, env);\r\n                } else if (path === '/api/interviewers' && method === 'GET') {\r\n                    response = await handleGetInterviewers(request, env);\r\n                }\r\n                // Company routes\r\n                else if (path === '/api/call-next' && method === 'POST') {\r\n                    response = await handleCallNext(request, env);\r\n                } else if (path === '/api/start-interview' && method === 'POST') {\r\n                    response = await handleStartInterview(request, env);\r\n                } else if (path === '/api/complete-interview' && method === 'POST') {\r\n                    response = await handleCompleteInterview(request, env);\r\n                } else if (path === '/api/no-show' && method === 'POST') {\r\n                    response = await handleNoShow(request, env);\r\n                }\r\n                // Public routes\r\n                else if (path === '/api/dashboard' && method === 'GET') {\r\n                    response = await handleDashboard(env);\r\n                }\r\n                // Interviewer CRUD routes (Secretary)\r\n                else if (path === '/api/interviewers' && method === 'POST') {\r\n                    response = await handleCreateInterviewer(request, env);\r\n                } else if (path.startsWith('/api/interviewers') && method === 'PUT') {\r\n                    response = await handleUpdateInterviewer(request, env);\r\n                } else if (path.startsWith('/api/interviewers') && method === 'DELETE') {\r\n                    response = await handleDeleteInterviewer(request, env);\r\n                }\r\n                // Student CRUD routes\r\n                else if (path.startsWith('/api/students') && method === 'DELETE') {\r\n                    response = await handleDeleteStudent(request, env);\r\n                }\r\n                // Pause/Unpause routes\r\n                else if (path === '/api/students/toggle-pause' && method === 'POST') {\r\n                    response = await handleToggleStudentPause(request, env);\r\n                } else if (path === '/api/interviewers/toggle-pause' && method === 'POST') {\r\n                    response = await handleToggleInterviewerPause(request, env);\r\n                }\r\n                // Gatekeeper routes\r\n                else if (path === '/api/gatekeeper/call-next' && method === 'POST') {\r\n                    response = await handleGatekeeperCallNext(request, env);\r\n                } else if (path === '/api/gatekeeper/action' && method === 'POST') {\r\n                    response = await handleGatekeeperAction(request, env);\r\n                } else if (path === '/api/gatekeeper/queue' && method === 'GET') {\r\n                    response = await handleGatekeeperQueue(request, env);\r\n                }\r\n                // 404\r\n                else {\r\n                    response = new Response(JSON.stringify({ success: false, error: 'Not found' }), {\r\n                        status: 404,\r\n                        headers: { 'Content-Type': 'application/json' }\r\n                    });\r\n                }\r\n\r\n                // Add CORS headers to response\r\n                const newHeaders = new Headers(response.headers);\r\n                Object.entries(corsHeaders).forEach(([key, value]) => {\r\n                    newHeaders.set(key, value);\r\n                });\r\n\r\n                return new Response(response.body, {\r\n                    status: response.status,\r\n                    headers: newHeaders\r\n                });\r\n            }\r\n\r\n            // ============ PAGE ROUTES ============\r\n            if (path === '/' || path === '/dashboard') {\r\n                return new Response(getPublicDashboardHtml(), {\r\n                    headers: { 'Content-Type': 'text/html' }\r\n                });\r\n            }\r\n\r\n            if (path === '/login') {\r\n                return new Response(getLoginPageHtml(), {\r\n                    headers: { 'Content-Type': 'text/html' }\r\n                });\r\n            }\r\n\r\n            if (path === '/secretary') {\r\n                return new Response(getSecretaryPageHtml(), {\r\n                    headers: { 'Content-Type': 'text/html' }\r\n                });\r\n            }\r\n\r\n            if (path === '/company') {\r\n                return new Response(getCompanyPageHtml(), {\r\n                    headers: { 'Content-Type': 'text/html' }\r\n                });\r\n            }\r\n\r\n            if (path === '/gatekeeper') {\r\n                return new Response(getGatekeeperPageHtml(), {\r\n                    headers: { 'Content-Type': 'text/html' }\r\n                });\r\n            }\r\n\r\n            // 404 for unknown routes\r\n            return new Response('Not Found', { status: 404 });\r\n\r\n        } catch (error) {\r\n            console.error('Worker error:', error);\r\n            return new Response(JSON.stringify({\r\n                success: false,\r\n                error: 'Internal server error'\r\n            }), {\r\n                status: 500,\r\n                headers: { 'Content-Type': 'application/json' }\r\n            });\r\n        }\r\n    }\r\n};\r\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"A:\\\\CareerFair\\\\uop-cdiq-main\\\\cloudflare-app\\\\src\\\\index.ts\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"A:\\\\CareerFair\\\\uop-cdiq-main\\\\cloudflare-app\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"A:\\\\CareerFair\\\\uop-cdiq-main\\\\cloudflare-app\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-miniflare3-json-error.ts\";\n\n\t\t\t\texport * from \"A:\\\\CareerFair\\\\uop-cdiq-main\\\\cloudflare-app\\\\src\\\\index.ts\";\n\n\t\t\t\texport const __INTERNAL_WRANGLER_MIDDLEWARE__ = [\n\t\t\t\t\t\n\t\t\t\t\t__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default\n\t\t\t\t]\n\t\t\t\texport default worker;", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY, { __INTERNAL_WRANGLER_MIDDLEWARE__ } from \"A:\\\\CareerFair\\\\uop-cdiq-main\\\\cloudflare-app\\\\.wrangler\\\\tmp\\\\bundle-NXjgIc\\\\middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"A:\\\\CareerFair\\\\uop-cdiq-main\\\\cloudflare-app\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\common.ts\";\nimport type { WorkerEntrypointConstructor } from \"A:\\\\CareerFair\\\\uop-cdiq-main\\\\cloudflare-app\\\\.wrangler\\\\tmp\\\\bundle-NXjgIc\\\\middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"A:\\\\CareerFair\\\\uop-cdiq-main\\\\cloudflare-app\\\\.wrangler\\\\tmp\\\\bundle-NXjgIc\\\\middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(worker: ExportedHandler): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WorkerEntrypointConstructor\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n"],
  "mappings": "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AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA0XX;AA3XgB;;;ACAT,SAAS,mBAA2B;AACvC,SAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA8OX;AA/OgB;;;ACAT,SAAS,uBAA+B;AAC7C,SAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA2eT;AA5egB;;;ACAT,SAAS,qBAA6B;AAC3C,SAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA6dT;AA9dgB;;;ACAT,SAAS,wBAAgC;AAC5C,SAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA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",
  "names": []
}
